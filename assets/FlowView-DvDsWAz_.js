import{d as pe,c as q,a as A,b as mt,o as H,_ as gt,e as oe,t as Me,f as xe,F as Ie,r as kt,g as Vr,w as me,u as Hr,h as Sa,i as Ee,j as Ge,k as L,l as _e,m as ve,n as vt,p as Ae,q as Na,s as Fr,v as vn,x as ka,y as Ca,z as Xn,A as ye,B as At,C as fi,D as Ma,E as Ia,G as zn,H as Lr,I as fe,J as ze,K as Ce,L as we,M as hi,N as Gn,O as ot,P as yt,Q as tn,R as Ta,S as Da,T as Ct,U as Yr,V as Aa,W as za,X as Pa}from"./index-JkLA6S0A.js";const Ba={class:"toolbar"},Oa={class:"button-group"},Ra={class:"button-group"},Va={class:"button-group"},Ha=pe({__name:"FlowToolbar",emits:["action"],setup(e,{emit:t}){const n=t,o=i=>{n("action",i)};return(i,r)=>(H(),q("div",Ba,[A("div",Oa,[A("button",{onClick:r[0]||(r[0]=s=>o("save")),"data-tooltip":"保存流程图"},r[8]||(r[8]=[A("span",{class:"icon"},"💾",-1),mt(" 保存 ",-1)])),A("button",{onClick:r[1]||(r[1]=s=>o("export")),"data-tooltip":"导出流程图"},r[9]||(r[9]=[A("span",{class:"icon"},"📤",-1),mt(" 导出 ",-1)])),A("button",{onClick:r[2]||(r[2]=s=>o("import")),"data-tooltip":"导入流程图"},r[10]||(r[10]=[A("span",{class:"icon"},"📥",-1),mt(" 导入 ",-1)])),A("button",{onClick:r[3]||(r[3]=s=>o("clear")),"data-tooltip":"清空画布"},r[11]||(r[11]=[A("span",{class:"icon"},"🗑️",-1),mt(" 清空 ",-1)]))]),r[16]||(r[16]=A("div",{class:"divider"},null,-1)),A("div",Ra,[A("button",{onClick:r[4]||(r[4]=s=>o("undo")),"data-tooltip":"撤销"},r[12]||(r[12]=[A("span",{class:"icon"},"↶",-1)])),A("button",{onClick:r[5]||(r[5]=s=>o("redo")),"data-tooltip":"重做"},r[13]||(r[13]=[A("span",{class:"icon"},"↷",-1)]))]),r[17]||(r[17]=A("div",{class:"divider"},null,-1)),A("div",Va,[A("button",{onClick:r[6]||(r[6]=s=>o("autoLayout")),"data-tooltip":"自动布局"},r[14]||(r[14]=[A("span",{class:"icon"},"🎯",-1),mt(" 自动布局 ",-1)])),A("button",{onClick:r[7]||(r[7]=s=>o("fitView")),"data-tooltip":"适应画布"},r[15]||(r[15]=[A("span",{class:"icon"},"🔍",-1),mt(" 适应画布 ",-1)]))]),r[18]||(r[18]=A("div",{class:"divider"},null,-1)),r[19]||(r[19]=A("span",null,"用户注册流程演示",-1))]))}}),Fa=gt(Ha,[["__scopeId","data-v-bbbc08fe"]]),La={class:"panel-section"},Ya={class:"stats"},Xa={class:"stat-item"},Ga={class:"value"},Wa={class:"stat-item"},Ua={class:"value"},Za={class:"stat-item"},Ka={class:"value"},qa={class:"stat-item"},Ja={class:"value"},Qa={class:"stat-item"},ja={class:"value"},el=pe({__name:"FlowStats",props:{nodes:{},edges:{}},setup(e){const t=e,n=oe(()=>t.nodes.filter(r=>{var s,a;return((a=(s=r.data)==null?void 0:s.label)==null?void 0:a.includes("？"))||r.type==="decision"}).length),o=oe(()=>t.nodes.filter(r=>r.type==="input").length),i=oe(()=>t.nodes.filter(r=>r.type==="output").length);return(r,s)=>(H(),q("div",La,[s[5]||(s[5]=A("div",{class:"section-title"},"流程统计",-1)),A("div",Ya,[A("div",Xa,[s[0]||(s[0]=A("span",{class:"label"},"节点数量:",-1)),A("span",Ga,Me(r.nodes.length),1)]),A("div",Wa,[s[1]||(s[1]=A("span",{class:"label"},"连接数量:",-1)),A("span",Ua,Me(r.edges.length),1)]),A("div",Za,[s[2]||(s[2]=A("span",{class:"label"},"分支数量:",-1)),A("span",Ka,Me(n.value),1)]),A("div",qa,[s[3]||(s[3]=A("span",{class:"label"},"开始节点:",-1)),A("span",Ja,Me(o.value),1)]),A("div",Qa,[s[4]||(s[4]=A("span",{class:"label"},"结束节点:",-1)),A("span",ja,Me(i.value),1)])])]))}}),tl=gt(el,[["__scopeId","data-v-678a4f7c"]]),nl={class:"left-panel"},ol={class:"node-list"},il=["onClick","onDragstart"],rl={class:"icon"},sl={class:"name"},al=pe({__name:"FlowNodePanel",props:{nodes:{},edges:{}},emits:["addNode"],setup(e,{emit:t}){const n=t,o=[{icon:"🚀",name:"开始节点",type:"input",style:{background:"#667eea",border:"none",borderRadius:"12px",color:"white",fontSize:"13px",fontWeight:"500",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.2)"}},{icon:"⚙️",name:"处理节点",type:"default",style:{background:"#f093fb",border:"none",borderRadius:"8px",color:"white",fontSize:"13px",fontWeight:"500",boxShadow:"0 2px 8px rgba(240, 147, 251, 0.2)"}},{icon:"❓",name:"判断节点",type:"decision",style:{background:"#4facfe",border:"none",borderRadius:"50%",color:"white",fontSize:"13px",fontWeight:"500",width:"100px",height:"100px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(79, 172, 254, 0.2)"}},{icon:"🏁",name:"结束节点",type:"output",style:{background:"#51cf66",border:"none",borderRadius:"12px",color:"white",fontSize:"13px",fontWeight:"500",boxShadow:"0 2px 8px rgba(81, 207, 102, 0.2)"}},{icon:"🎯",name:"自定义节点",type:"custom",data:{icon:"🎯",status:"info",progress:50},style:{}},{icon:"📝",name:"表单节点",type:"form",data:{fields:[{name:"字段名",type:"text",value:"默认值"},{name:"选项",type:"select",value:"选项1",options:["选项1","选项2","选项3"]}]},style:{}}],i=s=>{const a={type:s.type,data:{label:s.name,description:`新建的${s.name}`,...s.data},style:s.style};n("addNode",a)},r=(s,a)=>{s.dataTransfer&&(s.dataTransfer.setData("application/vueflow",JSON.stringify(a)),s.dataTransfer.effectAllowed="move")};return(s,a)=>(H(),q("div",nl,[a[0]||(a[0]=A("div",{class:"panel-title"},"流程节点",-1)),A("div",ol,[(H(),q(Ie,null,kt(o,l=>A("div",{key:l.type,class:"node-item",draggable:"true",onClick:u=>i(l),onDragstart:u=>r(u,l)},[A("div",rl,Me(l.icon),1),A("div",sl,Me(l.name),1)],40,il)),64))]),xe(tl,{nodes:s.nodes,edges:s.edges},null,8,["nodes","edges"])]))}}),ll=gt(al,[["__scopeId","data-v-032c68b2"]]);function uo(e){return Fr()?(zn(e),!0):!1}function je(e){return typeof e=="function"?e():L(e)}const ul=typeof window<"u"&&typeof document<"u",cl=e=>typeof e<"u",dl=Object.prototype.toString,fl=e=>dl.call(e)==="[object Object]",hl=()=>{};function pl(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const Xr=e=>e();function gl(e=Xr){const t=ve(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:Ta(t),pause:n,resume:o,eventFilter:i}}function zi(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function vl(e,t,n={}){const{eventFilter:o=Xr,...i}=n;return me(e,pl(o,t),i)}function zt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:s,resume:a,isActive:l}=gl(o);return{stop:vl(e,t,{...i,eventFilter:r}),pause:s,resume:a,isActive:l}}function ml(e,t={}){if(!fi(e))return Ma(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Ia(()=>({get(){return e.value[o]},set(i){var r;if((r=je(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=i,e.value=a}else{const a={...e.value,[o]:i};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=i}}));return n}function Fo(e,t=!1){function n(d,{flush:h="sync",deep:p=!1,timeout:E,throwOnTimeout:x}={}){let $=null;const T=[new Promise(m=>{$=me(e,M=>{d(M)!==t&&($==null||$(),m(M))},{flush:h,deep:p,immediate:!0})})];return E!=null&&T.push(zi(E,x).then(()=>je(e)).finally(()=>$==null?void 0:$())),Promise.race(T)}function o(d,h){if(!fi(d))return n(M=>M===d,h);const{flush:p="sync",deep:E=!1,timeout:x,throwOnTimeout:$}=h??{};let b=null;const m=[new Promise(M=>{b=me([e,d],([O,X])=>{t!==(O===X)&&(b==null||b(),M(O))},{flush:p,deep:E,immediate:!0})})];return x!=null&&m.push(zi(x,$).then(()=>je(e)).finally(()=>(b==null||b(),je(e)))),Promise.race(m)}function i(d){return n(h=>!!h,d)}function r(d){return o(null,d)}function s(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,h){return n(p=>{const E=Array.from(p);return E.includes(d)||E.includes(je(d))},h)}function u(d){return c(1,d)}function c(d=1,h){let p=-1;return n(()=>(p+=1,p>=d),h)}return Array.isArray(je(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return Fo(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:c,get not(){return Fo(e,!t)}}}function Lo(e){return Fo(e)}function yl(e){var t;const n=je(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Gr=ul?window:void 0;function Wr(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=Gr):[t,n,o,i]=e,!t)return hl;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],s=()=>{r.forEach(c=>c()),r.length=0},a=(c,d,h,p)=>(c.addEventListener(d,h,p),()=>c.removeEventListener(d,h,p)),l=me(()=>[yl(t),je(i)],([c,d])=>{if(s(),!c)return;const h=fl(d)?{...d}:d;r.push(...n.flatMap(p=>o.map(E=>a(c,p,E,h))))},{immediate:!0,flush:"post"}),u=()=>{l(),s()};return uo(u),u}function wl(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Pi(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Gr,eventName:r="keydown",passive:s=!1,dedupe:a=!1}=o,l=wl(t);return Wr(i,r,c=>{c.repeat&&je(a)||l(c)&&n(c)},s)}function _l(e){return JSON.parse(JSON.stringify(e))}function No(e,t,n,o={}){var i,r,s;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:h}=o,p=vn(),E=n||(p==null?void 0:p.emit)||((i=p==null?void 0:p.$emit)==null?void 0:i.bind(p))||((s=(r=p==null?void 0:p.proxy)==null?void 0:r.$emit)==null?void 0:s.bind(p==null?void 0:p.proxy));let x=u;t||(t="modelValue"),x=x||`update:${t.toString()}`;const $=m=>a?typeof a=="function"?a(m):_l(m):m,b=()=>cl(e[t])?$(e[t]):d,T=m=>{h?h(m)&&E(x,m):E(x,m)};if(l){const m=b(),M=ve(m);let O=!1;return me(()=>e[t],X=>{O||(O=!0,M.value=$(X),ot(()=>O=!1))}),me(M,X=>{!O&&(X!==e[t]||c)&&T(X)},{deep:c}),M}else return oe({get(){return b()},set(m){T(m)}})}var bl={value:()=>{}};function co(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Pn(n)}function Pn(e){this._=e}function $l(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Pn.prototype=co.prototype={constructor:Pn,on:function(e,t){var n=this._,o=$l(e+"",n),i,r=-1,s=o.length;if(arguments.length<2){for(;++r<s;)if((i=(e=o[r]).type)&&(i=xl(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(i=(e=o[r]).type)n[i]=Bi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Bi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Pn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function xl(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Bi(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=bl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yo="http://www.w3.org/1999/xhtml";const Oi={svg:"http://www.w3.org/2000/svg",xhtml:Yo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Oi.hasOwnProperty(t)?{space:Oi[t],local:e}:e}function El(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yo&&t.documentElement.namespaceURI===Yo?t.createElement(e):t.createElementNS(n,e)}}function Sl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ur(e){var t=fo(e);return(t.local?Sl:El)(t)}function Nl(){}function pi(e){return e==null?Nl:function(){return this.querySelector(e)}}function kl(e){typeof e!="function"&&(e=pi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,a=o[i]=new Array(s),l,u,c=0;c<s;++c)(l=r[c])&&(u=e.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Pe(o,this._parents)}function Cl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ml(){return[]}function Zr(e){return e==null?Ml:function(){return this.querySelectorAll(e)}}function Il(e){return function(){return Cl(e.apply(this,arguments))}}function Tl(e){typeof e=="function"?e=Il(e):e=Zr(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var s=t[r],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),i.push(l));return new Pe(o,i)}function Kr(e){return function(){return this.matches(e)}}function qr(e){return function(t){return t.matches(e)}}var Dl=Array.prototype.find;function Al(e){return function(){return Dl.call(this.children,e)}}function zl(){return this.firstElementChild}function Pl(e){return this.select(e==null?zl:Al(typeof e=="function"?e:qr(e)))}var Bl=Array.prototype.filter;function Ol(){return Array.from(this.children)}function Rl(e){return function(){return Bl.call(this.children,e)}}function Vl(e){return this.selectAll(e==null?Ol:Rl(typeof e=="function"?e:qr(e)))}function Hl(e){typeof e!="function"&&(e=Kr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,a=o[i]=[],l,u=0;u<s;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&a.push(l);return new Pe(o,this._parents)}function Jr(e){return new Array(e.length)}function Fl(){return new Pe(this._enter||this._groups.map(Jr),this._parents)}function Wn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Wn.prototype={constructor:Wn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ll(e){return function(){return e}}function Yl(e,t,n,o,i,r){for(var s=0,a,l=t.length,u=r.length;s<u;++s)(a=t[s])?(a.__data__=r[s],o[s]=a):n[s]=new Wn(e,r[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Xl(e,t,n,o,i,r,s){var a,l,u=new Map,c=t.length,d=r.length,h=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(h[a]=p=s.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<d;++a)p=s.call(e,r[a],a,r)+"",(l=u.get(p))?(o[a]=l,l.__data__=r[a],u.delete(p)):n[a]=new Wn(e,r[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function Gl(e){return e.__data__}function Wl(e,t){if(!arguments.length)return Array.from(this,Gl);var n=t?Xl:Yl,o=this._parents,i=this._groups;typeof e!="function"&&(e=Ll(e));for(var r=i.length,s=new Array(r),a=new Array(r),l=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],h=d.length,p=Ul(e.call(c,c&&c.__data__,u,o)),E=p.length,x=a[u]=new Array(E),$=s[u]=new Array(E),b=l[u]=new Array(h);n(c,d,x,$,b,p,t);for(var T=0,m=0,M,O;T<E;++T)if(M=x[T]){for(T>=m&&(m=T+1);!(O=$[m])&&++m<E;);M._next=O||null}}return s=new Pe(s,o),s._enter=a,s._exit=l,s}function Ul(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zl(){return new Pe(this._exit||this._groups.map(Jr),this._parents)}function Kl(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function ql(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,s=Math.min(i,r),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=o[l],d=u.length,h=a[l]=new Array(d),p,E=0;E<d;++E)(p=u[E]||c[E])&&(h[E]=p);for(;l<i;++l)a[l]=n[l];return new Pe(a,this._parents)}function Jl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],s;--i>=0;)(s=o[i])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Ql(e){e||(e=jl);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var s=n[r],a=s.length,l=i[r]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Pe(i,this._parents).order()}function jl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function eu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function tu(){return Array.from(this)}function nu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var s=o[i];if(s)return s}return null}function ou(){let e=0;for(const t of this)++e;return e}function iu(){return!this.node()}function ru(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,s=i.length,a;r<s;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function su(e){return function(){this.removeAttribute(e)}}function au(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lu(e,t){return function(){this.setAttribute(e,t)}}function uu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function cu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function du(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function fu(e,t){var n=fo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?au:su:typeof t=="function"?n.local?du:cu:n.local?uu:lu)(n,t))}function Qr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function hu(e){return function(){this.style.removeProperty(e)}}function pu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function gu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function vu(e,t,n){return arguments.length>1?this.each((t==null?hu:typeof t=="function"?gu:pu)(e,t,n??"")):Vt(this.node(),e)}function Vt(e,t){return e.style.getPropertyValue(t)||Qr(e).getComputedStyle(e,null).getPropertyValue(t)}function mu(e){return function(){delete this[e]}}function yu(e,t){return function(){this[e]=t}}function wu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _u(e,t){return arguments.length>1?this.each((t==null?mu:typeof t=="function"?wu:yu)(e,t)):this.node()[e]}function jr(e){return e.trim().split(/^|\s+/)}function gi(e){return e.classList||new es(e)}function es(e){this._node=e,this._names=jr(e.getAttribute("class")||"")}es.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ts(e,t){for(var n=gi(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function ns(e,t){for(var n=gi(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function bu(e){return function(){ts(this,e)}}function $u(e){return function(){ns(this,e)}}function xu(e,t){return function(){(t.apply(this,arguments)?ts:ns)(this,e)}}function Eu(e,t){var n=jr(e+"");if(arguments.length<2){for(var o=gi(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?xu:t?bu:$u)(n,t))}function Su(){this.textContent=""}function Nu(e){return function(){this.textContent=e}}function ku(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cu(e){return arguments.length?this.each(e==null?Su:(typeof e=="function"?ku:Nu)(e)):this.node().textContent}function Mu(){this.innerHTML=""}function Iu(e){return function(){this.innerHTML=e}}function Tu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Du(e){return arguments.length?this.each(e==null?Mu:(typeof e=="function"?Tu:Iu)(e)):this.node().innerHTML}function Au(){this.nextSibling&&this.parentNode.appendChild(this)}function zu(){return this.each(Au)}function Pu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bu(){return this.each(Pu)}function Ou(e){var t=typeof e=="function"?e:Ur(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ru(){return null}function Vu(e,t){var n=typeof e=="function"?e:Ur(e),o=t==null?Ru:typeof t=="function"?t:pi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Hu(){var e=this.parentNode;e&&e.removeChild(this)}function Fu(){return this.each(Hu)}function Lu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xu(e){return this.select(e?Yu:Lu)}function Gu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Wu(e){return function(t){e.call(this,t,this.__data__)}}function Uu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Zu(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function Ku(e,t,n){return function(){var o=this.__on,i,r=Wu(t);if(o){for(var s=0,a=o.length;s<a;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function qu(e,t,n){var o=Uu(e+""),i,r=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<r;++i)if((s=o[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Ku:Zu,i=0;i<r;++i)this.each(a(o[i],t,n));return this}function os(e,t,n){var o=Qr(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ju(e,t){return function(){return os(this,e,t)}}function Qu(e,t){return function(){return os(this,e,t.apply(this,arguments))}}function ju(e,t){return this.each((typeof t=="function"?Qu:Ju)(e,t))}function*ec(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,s;i<r;++i)(s=o[i])&&(yield s)}var is=[null];function Pe(e,t){this._groups=e,this._parents=t}function mn(){return new Pe([[document.documentElement]],is)}function tc(){return this}Pe.prototype=mn.prototype={constructor:Pe,select:kl,selectAll:Tl,selectChild:Pl,selectChildren:Vl,filter:Hl,data:Wl,enter:Fl,exit:Zl,join:Kl,merge:ql,selection:tc,order:Jl,sort:Ql,call:eu,nodes:tu,node:nu,size:ou,empty:iu,each:ru,attr:fu,style:vu,property:_u,classed:Eu,text:Cu,html:Du,raise:zu,lower:Bu,append:Ou,insert:Vu,remove:Fu,clone:Xu,datum:Gu,on:qu,dispatch:ju,[Symbol.iterator]:ec};function Oe(e){return typeof e=="string"?new Pe([[document.querySelector(e)]],[document.documentElement]):new Pe([[e]],is)}function nc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ye(e,t){if(e=nc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const oc={passive:!1},sn={capture:!0,passive:!1};function ko(e){e.stopImmediatePropagation()}function Pt(e){e.preventDefault(),e.stopImmediatePropagation()}function rs(e){var t=e.document.documentElement,n=Oe(e).on("dragstart.drag",Pt,sn);"onselectstart"in t?n.on("selectstart.drag",Pt,sn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ss(e,t){var n=e.document.documentElement,o=Oe(e).on("dragstart.drag",null);t&&(o.on("click.drag",Pt,sn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const bn=e=>()=>e;function Xo(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Xo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ic(e){return!e.ctrlKey&&!e.button}function rc(){return this.parentNode}function sc(e,t){return t??{x:e.x,y:e.y}}function ac(){return navigator.maxTouchPoints||"ontouchstart"in this}function lc(){var e=ic,t=rc,n=sc,o=ac,i={},r=co("start","drag","end"),s=0,a,l,u,c,d=0;function h(M){M.on("mousedown.drag",p).filter(o).on("touchstart.drag",$).on("touchmove.drag",b,oc).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(M,O){if(!(c||!e.call(this,M,O))){var X=m(this,t.call(this,M,O),M,O,"mouse");X&&(Oe(M.view).on("mousemove.drag",E,sn).on("mouseup.drag",x,sn),rs(M.view),ko(M),u=!1,a=M.clientX,l=M.clientY,X("start",M))}}function E(M){if(Pt(M),!u){var O=M.clientX-a,X=M.clientY-l;u=O*O+X*X>d}i.mouse("drag",M)}function x(M){Oe(M.view).on("mousemove.drag mouseup.drag",null),ss(M.view,u),Pt(M),i.mouse("end",M)}function $(M,O){if(e.call(this,M,O)){var X=M.changedTouches,R=t.call(this,M,O),V=X.length,ee,G;for(ee=0;ee<V;++ee)(G=m(this,R,M,O,X[ee].identifier,X[ee]))&&(ko(M),G("start",M,X[ee]))}}function b(M){var O=M.changedTouches,X=O.length,R,V;for(R=0;R<X;++R)(V=i[O[R].identifier])&&(Pt(M),V("drag",M,O[R]))}function T(M){var O=M.changedTouches,X=O.length,R,V;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),R=0;R<X;++R)(V=i[O[R].identifier])&&(ko(M),V("end",M,O[R]))}function m(M,O,X,R,V,ee){var G=r.copy(),F=Ye(ee||X,O),k,K,f;if((f=n.call(M,new Xo("beforestart",{sourceEvent:X,target:h,identifier:V,active:s,x:F[0],y:F[1],dx:0,dy:0,dispatch:G}),R))!=null)return k=f.x-F[0]||0,K=f.y-F[1]||0,function N(g,I,S){var D=F,C;switch(g){case"start":i[V]=N,C=s++;break;case"end":delete i[V],--s;case"drag":F=Ye(S||I,O),C=s;break}G.call(g,M,new Xo(g,{sourceEvent:I,subject:f,target:h,identifier:V,active:C,x:F[0]+k,y:F[1]+K,dx:F[0]-D[0],dy:F[1]-D[1],dispatch:G}),R)}}return h.filter=function(M){return arguments.length?(e=typeof M=="function"?M:bn(!!M),h):e},h.container=function(M){return arguments.length?(t=typeof M=="function"?M:bn(M),h):t},h.subject=function(M){return arguments.length?(n=typeof M=="function"?M:bn(M),h):n},h.touchable=function(M){return arguments.length?(o=typeof M=="function"?M:bn(!!M),h):o},h.on=function(){var M=r.on.apply(r,arguments);return M===r?h:M},h.clickDistance=function(M){return arguments.length?(d=(M=+M)*M,h):Math.sqrt(d)},h}function vi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function as(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function yn(){}var an=.7,Un=1/an,Bt="\\s*([+-]?\\d+)\\s*",ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uc=/^#([0-9a-f]{3,8})$/,cc=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),dc=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),fc=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${ln}\\)$`),hc=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${ln}\\)$`),pc=new RegExp(`^hsl\\(${ln},${Ue},${Ue}\\)$`),gc=new RegExp(`^hsla\\(${ln},${Ue},${Ue},${ln}\\)$`),Ri={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vi(yn,Mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vi,formatHex:Vi,formatHex8:vc,formatHsl:mc,formatRgb:Hi,toString:Hi});function Vi(){return this.rgb().formatHex()}function vc(){return this.rgb().formatHex8()}function mc(){return ls(this).formatHsl()}function Hi(){return this.rgb().formatRgb()}function Mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Fi(t):n===3?new Te(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$n(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cc.exec(e))?new Te(t[1],t[2],t[3],1):(t=dc.exec(e))?new Te(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fc.exec(e))?$n(t[1],t[2],t[3],t[4]):(t=hc.exec(e))?$n(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pc.exec(e))?Xi(t[1],t[2]/100,t[3]/100,1):(t=gc.exec(e))?Xi(t[1],t[2]/100,t[3]/100,t[4]):Ri.hasOwnProperty(e)?Fi(Ri[e]):e==="transparent"?new Te(NaN,NaN,NaN,0):null}function Fi(e){return new Te(e>>16&255,e>>8&255,e&255,1)}function $n(e,t,n,o){return o<=0&&(e=t=n=NaN),new Te(e,t,n,o)}function yc(e){return e instanceof yn||(e=Mt(e)),e?(e=e.rgb(),new Te(e.r,e.g,e.b,e.opacity)):new Te}function Go(e,t,n,o){return arguments.length===1?yc(e):new Te(e,t,n,o??1)}function Te(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}vi(Te,Go,as(yn,{brighter(e){return e=e==null?Un:Math.pow(Un,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?an:Math.pow(an,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Te(Et(this.r),Et(this.g),Et(this.b),Zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:wc,formatRgb:Yi,toString:Yi}));function Li(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}`}function wc(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}${$t((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yi(){const e=Zn(this.opacity);return`${e===1?"rgb(":"rgba("}${Et(this.r)}, ${Et(this.g)}, ${Et(this.b)}${e===1?")":`, ${e})`}`}function Zn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Et(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $t(e){return e=Et(e),(e<16?"0":"")+e.toString(16)}function Xi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Re(e,t,n,o)}function ls(e){if(e instanceof Re)return new Re(e.h,e.s,e.l,e.opacity);if(e instanceof yn||(e=Mt(e)),!e)return new Re;if(e instanceof Re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),s=NaN,a=r-i,l=(r+i)/2;return a?(t===r?s=(n-o)/a+(n<o)*6:n===r?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?r+i:2-r-i,s*=60):a=l>0&&l<1?0:s,new Re(s,a,l,e.opacity)}function _c(e,t,n,o){return arguments.length===1?ls(e):new Re(e,t,n,o??1)}function Re(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}vi(Re,_c,as(yn,{brighter(e){return e=e==null?Un:Math.pow(Un,e),new Re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?an:Math.pow(an,e),new Re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Te(Co(e>=240?e-240:e+120,i,o),Co(e,i,o),Co(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Re(Gi(this.h),xn(this.s),xn(this.l),Zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zn(this.opacity);return`${e===1?"hsl(":"hsla("}${Gi(this.h)}, ${xn(this.s)*100}%, ${xn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Gi(e){return e=(e||0)%360,e<0?e+360:e}function xn(e){return Math.max(0,Math.min(1,e||0))}function Co(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mi=e=>()=>e;function bc(e,t){return function(n){return e+n*t}}function $c(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function xc(e){return(e=+e)==1?us:function(t,n){return n-t?$c(t,n,e):mi(isNaN(t)?n:t)}}function us(e,t){var n=t-e;return n?bc(e,n):mi(isNaN(e)?t:e)}const Kn=function e(t){var n=xc(t);function o(i,r){var s=n((i=Go(i)).r,(r=Go(r)).r),a=n(i.g,r.g),l=n(i.b,r.b),u=us(i.opacity,r.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function Ec(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function Sc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nc(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),r=new Array(n),s;for(s=0;s<o;++s)i[s]=nn(e[s],t[s]);for(;s<n;++s)r[s]=t[s];return function(a){for(s=0;s<o;++s)r[s]=i[s](a);return r}}function kc(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Xe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cc(e,t){var n={},o={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=nn(e[i],t[i]):o[i]=t[i];return function(r){for(i in n)o[i]=n[i](r);return o}}var Wo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(Wo.source,"g");function Mc(e){return function(){return e}}function Ic(e){return function(t){return e(t)+""}}function cs(e,t){var n=Wo.lastIndex=Mo.lastIndex=0,o,i,r,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=Wo.exec(e))&&(i=Mo.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),a[s]?a[s]+=r:a[++s]=r),(o=o[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Xe(o,i)})),n=Mo.lastIndex;return n<t.length&&(r=t.slice(n),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?Ic(l[0].x):Mc(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function nn(e,t){var n=typeof t,o;return t==null||n==="boolean"?mi(t):(n==="number"?Xe:n==="string"?(o=Mt(t))?(t=o,Kn):cs:t instanceof Mt?Kn:t instanceof Date?kc:Sc(t)?Ec:Array.isArray(t)?Nc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cc:Xe)(e,t)}var Wi=180/Math.PI,Uo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ds(e,t,n,o,i,r){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Wi,skewX:Math.atan(l)*Wi,scaleX:s,scaleY:a}}var En;function Tc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Uo:ds(t.a,t.b,t.c,t.d,t.e,t.f)}function Dc(e){return e==null||(En||(En=document.createElementNS("http://www.w3.org/2000/svg","g")),En.setAttribute("transform",e),!(e=En.transform.baseVal.consolidate()))?Uo:(e=e.matrix,ds(e.a,e.b,e.c,e.d,e.e,e.f))}function fs(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,h,p,E){if(u!==d||c!==h){var x=p.push("translate(",null,t,null,n);E.push({i:x-4,x:Xe(u,d)},{i:x-2,x:Xe(c,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function s(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,o)-2,x:Xe(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,h){u!==c?h.push({i:d.push(i(d)+"skewX(",null,o)-2,x:Xe(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,h,p,E){if(u!==d||c!==h){var x=p.push(i(p)+"scale(",null,",",null,")");E.push({i:x-4,x:Xe(u,d)},{i:x-2,x:Xe(c,h)})}else(d!==1||h!==1)&&p.push(i(p)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,h),s(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(p){for(var E=-1,x=h.length,$;++E<x;)d[($=h[E]).i]=$.x(p);return d.join("")}}}var Ac=fs(Tc,"px, ","px)","deg)"),zc=fs(Dc,", ",")",")"),Pc=1e-12;function Ui(e){return((e=Math.exp(e))+1/e)/2}function Bc(e){return((e=Math.exp(e))-1/e)/2}function Oc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Bn=function e(t,n,o){function i(r,s){var a=r[0],l=r[1],u=r[2],c=s[0],d=s[1],h=s[2],p=c-a,E=d-l,x=p*p+E*E,$,b;if(x<Pc)b=Math.log(h/u)/t,$=function(R){return[a+R*p,l+R*E,u*Math.exp(t*R*b)]};else{var T=Math.sqrt(x),m=(h*h-u*u+o*x)/(2*u*n*T),M=(h*h-u*u-o*x)/(2*h*n*T),O=Math.log(Math.sqrt(m*m+1)-m),X=Math.log(Math.sqrt(M*M+1)-M);b=(X-O)/t,$=function(R){var V=R*b,ee=Ui(O),G=u/(n*T)*(ee*Oc(t*V+O)-Bc(O));return[a+G*p,l+G*E,u*ee/Ui(t*V+O)]}}return $.duration=b*1e3*t/Math.SQRT2,$}return i.rho=function(r){var s=Math.max(.001,+r),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Ht=0,qt=0,Wt=0,hs=1e3,qn,Jt,Jn=0,It=0,ho=0,un=typeof performance=="object"&&performance.now?performance:Date,ps=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yi(){return It||(ps(Rc),It=un.now()+ho)}function Rc(){It=0}function Qn(){this._call=this._time=this._next=null}Qn.prototype=gs.prototype={constructor:Qn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yi():+n)+(t==null?0:+t),!this._next&&Jt!==this&&(Jt?Jt._next=this:qn=this,Jt=this),this._call=e,this._time=n,Zo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zo())}};function gs(e,t,n){var o=new Qn;return o.restart(e,t,n),o}function Vc(){yi(),++Ht;for(var e=qn,t;e;)(t=It-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ht}function Zi(){It=(Jn=un.now())+ho,Ht=qt=0;try{Vc()}finally{Ht=0,Fc(),It=0}}function Hc(){var e=un.now(),t=e-Jn;t>hs&&(ho-=t,Jn=e)}function Fc(){for(var e,t=qn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qn=n);Jt=e,Zo(o)}function Zo(e){if(!Ht){qt&&(qt=clearTimeout(qt));var t=e-It;t>24?(e<1/0&&(qt=setTimeout(Zi,e-un.now()-ho)),Wt&&(Wt=clearInterval(Wt))):(Wt||(Jn=un.now(),Wt=setInterval(Hc,hs)),Ht=1,ps(Zi))}}function Ki(e,t,n){var o=new Qn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Lc=co("start","end","cancel","interrupt"),Yc=[],vs=0,qi=1,Ko=2,On=3,Ji=4,qo=5,Rn=6;function po(e,t,n,o,i,r){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Xc(e,n,{name:t,index:o,group:i,on:Lc,tween:Yc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:vs})}function wi(e,t){var n=He(e,t);if(n.state>vs)throw new Error("too late; already scheduled");return n}function Ke(e,t){var n=He(e,t);if(n.state>On)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xc(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=gs(r,0,n.time);function r(u){n.state=qi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,h,p;if(n.state!==qi)return l();for(c in o)if(p=o[c],p.name===n.name){if(p.state===On)return Ki(s);p.state===Ji?(p.state=Rn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=Rn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(Ki(function(){n.state===On&&(n.state=Ji,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ko,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ko){for(n.state=On,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=qo,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===qo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Rn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Vn(e,t){var n=e.__transition,o,i,r=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){r=!1;continue}i=o.state>Ko&&o.state<qo,o.state=Rn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}r&&delete e.__transition}}function Gc(e){return this.each(function(){Vn(this,e)})}function Wc(e,t){var n,o;return function(){var i=Ke(this,e),r=i.tween;if(r!==n){o=n=r;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}i.tween=o}}function Uc(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=Ke(this,e),s=r.tween;if(s!==o){i=(o=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}r.tween=i}}function Zc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=He(this.node(),n).tween,i=0,r=o.length,s;i<r;++i)if((s=o[i]).name===e)return s.value;return null}return this.each((t==null?Wc:Uc)(n,e,t))}function _i(e,t,n){var o=e._id;return e.each(function(){var i=Ke(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return He(i,o).value[t]}}function ms(e,t){var n;return(typeof t=="number"?Xe:t instanceof Mt?Kn:(n=Mt(t))?(t=n,Kn):cs)(e,t)}function Kc(e){return function(){this.removeAttribute(e)}}function qc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jc(e,t,n){var o,i=n+"",r;return function(){var s=this.getAttribute(e);return s===i?null:s===o?r:r=t(o=s,n)}}function Qc(e,t,n){var o,i=n+"",r;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?r:r=t(o=s,n)}}function jc(e,t,n){var o,i,r;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===i?r:(i=l,r=t(o=s,a)))}}function ed(e,t,n){var o,i,r;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===i?r:(i=l,r=t(o=s,a)))}}function td(e,t){var n=fo(e),o=n==="transform"?zc:ms;return this.attrTween(e,typeof t=="function"?(n.local?ed:jc)(n,o,_i(this,"attr."+e,t)):t==null?(n.local?qc:Kc)(n):(n.local?Qc:Jc)(n,o,t))}function nd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function od(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function id(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&od(e,r)),n}return i._value=t,i}function rd(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&nd(e,r)),n}return i._value=t,i}function sd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=fo(e);return this.tween(n,(o.local?id:rd)(o,t))}function ad(e,t){return function(){wi(this,e).delay=+t.apply(this,arguments)}}function ld(e,t){return t=+t,function(){wi(this,e).delay=t}}function ud(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ad:ld)(t,e)):He(this.node(),t).delay}function cd(e,t){return function(){Ke(this,e).duration=+t.apply(this,arguments)}}function dd(e,t){return t=+t,function(){Ke(this,e).duration=t}}function fd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cd:dd)(t,e)):He(this.node(),t).duration}function hd(e,t){if(typeof t!="function")throw new Error;return function(){Ke(this,e).ease=t}}function pd(e){var t=this._id;return arguments.length?this.each(hd(t,e)):He(this.node(),t).ease}function gd(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,e).ease=n}}function vd(e){if(typeof e!="function")throw new Error;return this.each(gd(this._id,e))}function md(e){typeof e!="function"&&(e=Kr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,a=o[i]=[],l,u=0;u<s;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&a.push(l);return new it(o,this._parents,this._name,this._id)}function yd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),s=new Array(o),a=0;a<r;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(d[p]=h);for(;a<o;++a)s[a]=t[a];return new it(s,this._parents,this._name,this._id)}function wd(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _d(e,t,n){var o,i,r=wd(t)?wi:Ke;return function(){var s=r(this,e),a=s.on;a!==o&&(i=(o=a).copy()).on(t,n),s.on=i}}function bd(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(_d(n,e,t))}function $d(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xd(){return this.on("end.remove",$d(this._id))}function Ed(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pi(e));for(var o=this._groups,i=o.length,r=new Array(i),s=0;s<i;++s)for(var a=o[s],l=a.length,u=r[s]=new Array(l),c,d,h=0;h<l;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,po(u[h],t,n,h,u,He(c,n)));return new it(r,this._parents,t,n)}function Sd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zr(e));for(var o=this._groups,i=o.length,r=[],s=[],a=0;a<i;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=e.call(c,c.__data__,d,l),p,E=He(c,n),x=0,$=h.length;x<$;++x)(p=h[x])&&po(p,t,n,x,h,E);r.push(h),s.push(c)}return new it(r,s,t,n)}var Nd=mn.prototype.constructor;function kd(){return new Nd(this._groups,this._parents)}function Cd(e,t){var n,o,i;return function(){var r=Vt(this,e),s=(this.style.removeProperty(e),Vt(this,e));return r===s?null:r===n&&s===o?i:i=t(n=r,o=s)}}function ys(e){return function(){this.style.removeProperty(e)}}function Md(e,t,n){var o,i=n+"",r;return function(){var s=Vt(this,e);return s===i?null:s===o?r:r=t(o=s,n)}}function Id(e,t,n){var o,i,r;return function(){var s=Vt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Vt(this,e))),s===l?null:s===o&&l===i?r:(i=l,r=t(o=s,a))}}function Td(e,t){var n,o,i,r="style."+t,s="end."+r,a;return function(){var l=Ke(this,e),u=l.on,c=l.value[r]==null?a||(a=ys(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(s,i=c),l.on=o}}function Dd(e,t,n){var o=(e+="")=="transform"?Ac:ms;return t==null?this.styleTween(e,Cd(e,o)).on("end.style."+e,ys(e)):typeof t=="function"?this.styleTween(e,Id(e,o,_i(this,"style."+e,t))).each(Td(this._id,e)):this.styleTween(e,Md(e,o,t),n).on("end.style."+e,null)}function Ad(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function zd(e,t,n){var o,i;function r(){var s=t.apply(this,arguments);return s!==i&&(o=(i=s)&&Ad(e,s,n)),o}return r._value=t,r}function Pd(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,zd(e,t,n??""))}function Bd(e){return function(){this.textContent=e}}function Od(e){return function(){var t=e(this);this.textContent=t??""}}function Rd(e){return this.tween("text",typeof e=="function"?Od(_i(this,"text",e)):Bd(e==null?"":e+""))}function Vd(e){return function(t){this.textContent=e.call(this,t)}}function Hd(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Vd(i)),t}return o._value=e,o}function Fd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Hd(e))}function Ld(){for(var e=this._name,t=this._id,n=ws(),o=this._groups,i=o.length,r=0;r<i;++r)for(var s=o[r],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=He(l,t);po(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new it(o,this._parents,e,n)}function Yd(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,s){var a={value:s},l={value:function(){--i===0&&r()}};n.each(function(){var u=Ke(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&r()})}var Xd=0;function it(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ws(){return++Xd}var Je=mn.prototype;it.prototype={constructor:it,select:Ed,selectAll:Sd,selectChild:Je.selectChild,selectChildren:Je.selectChildren,filter:md,merge:yd,selection:kd,transition:Ld,call:Je.call,nodes:Je.nodes,node:Je.node,size:Je.size,empty:Je.empty,each:Je.each,on:bd,attr:td,attrTween:sd,style:Dd,styleTween:Pd,text:Rd,textTween:Fd,remove:xd,tween:Zc,delay:ud,duration:fd,ease:pd,easeVarying:vd,end:Yd,[Symbol.iterator]:Je[Symbol.iterator]};function Gd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wd={time:null,delay:0,duration:250,ease:Gd};function Ud(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zd(e){var t,n;e instanceof it?(t=e._id,e=e._name):(t=ws(),(n=Wd).time=yi(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var s=o[r],a=s.length,l,u=0;u<a;++u)(l=s[u])&&po(l,e,t,u,s,n||Ud(l,t));return new it(o,this._parents,e,t)}mn.prototype.interrupt=Gc;mn.prototype.transition=Zd;const Sn=e=>()=>e;function Kd(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function et(e,t,n){this.k=e,this.x=t,this.y=n}et.prototype={constructor:et,scale:function(e){return e===1?this:new et(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new et(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ft=new et(1,0,0);et.prototype;function Io(e){e.stopImmediatePropagation()}function Ut(e){e.preventDefault(),e.stopImmediatePropagation()}function qd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Jd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Qi(){return this.__zoom||Ft}function Qd(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jd(){return navigator.maxTouchPoints||"ontouchstart"in this}function ef(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function tf(){var e=qd,t=Jd,n=ef,o=Qd,i=jd,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Bn,u=co("start","zoom","end"),c,d,h,p=500,E=150,x=0,$=10;function b(f){f.property("__zoom",Qi).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",ee).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(f,N,g,I){var S=f.selection?f.selection():f;S.property("__zoom",Qi),f!==S?O(f,N,g,I):S.interrupt().each(function(){X(this,arguments).event(I).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},b.scaleBy=function(f,N,g,I){b.scaleTo(f,function(){var S=this.__zoom.k,D=typeof N=="function"?N.apply(this,arguments):N;return S*D},g,I)},b.scaleTo=function(f,N,g,I){b.transform(f,function(){var S=t.apply(this,arguments),D=this.__zoom,C=g==null?M(S):typeof g=="function"?g.apply(this,arguments):g,P=D.invert(C),W=typeof N=="function"?N.apply(this,arguments):N;return n(m(T(D,W),C,P),S,s)},g,I)},b.translateBy=function(f,N,g,I){b.transform(f,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof g=="function"?g.apply(this,arguments):g),t.apply(this,arguments),s)},null,I)},b.translateTo=function(f,N,g,I,S){b.transform(f,function(){var D=t.apply(this,arguments),C=this.__zoom,P=I==null?M(D):typeof I=="function"?I.apply(this,arguments):I;return n(Ft.translate(P[0],P[1]).scale(C.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof g=="function"?-g.apply(this,arguments):-g),D,s)},I,S)};function T(f,N){return N=Math.max(r[0],Math.min(r[1],N)),N===f.k?f:new et(N,f.x,f.y)}function m(f,N,g){var I=N[0]-g[0]*f.k,S=N[1]-g[1]*f.k;return I===f.x&&S===f.y?f:new et(f.k,I,S)}function M(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function O(f,N,g,I){f.on("start.zoom",function(){X(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event(I).end()}).tween("zoom",function(){var S=this,D=arguments,C=X(S,D).event(I),P=t.apply(S,D),W=g==null?M(P):typeof g=="function"?g.apply(S,D):g,te=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),B=S.__zoom,Y=typeof N=="function"?N.apply(S,D):N,Z=l(B.invert(W).concat(te/B.k),Y.invert(W).concat(te/Y.k));return function(re){if(re===1)re=Y;else{var le=Z(re),se=te/le[2];re=new et(se,W[0]-le[0]*se,W[1]-le[1]*se)}C.zoom(null,re)}})}function X(f,N,g){return!g&&f.__zooming||new R(f,N)}function R(f,N){this.that=f,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,N),this.taps=0}R.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,N){return this.mouse&&f!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var N=Oe(this.that).datum();u.call(f,this.that,new Kd(f,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),N)}};function V(f,...N){if(!e.apply(this,arguments))return;var g=X(this,N).event(f),I=this.__zoom,S=Math.max(r[0],Math.min(r[1],I.k*Math.pow(2,o.apply(this,arguments)))),D=Ye(f);if(g.wheel)(g.mouse[0][0]!==D[0]||g.mouse[0][1]!==D[1])&&(g.mouse[1]=I.invert(g.mouse[0]=D)),clearTimeout(g.wheel);else{if(I.k===S)return;g.mouse=[D,I.invert(D)],Vn(this),g.start()}Ut(f),g.wheel=setTimeout(C,E),g.zoom("mouse",n(m(T(I,S),g.mouse[0],g.mouse[1]),g.extent,s));function C(){g.wheel=null,g.end()}}function ee(f,...N){if(h||!e.apply(this,arguments))return;var g=f.currentTarget,I=X(this,N,!0).event(f),S=Oe(f.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",te,!0),D=Ye(f,g),C=f.clientX,P=f.clientY;rs(f.view),Io(f),I.mouse=[D,this.__zoom.invert(D)],Vn(this),I.start();function W(B){if(Ut(B),!I.moved){var Y=B.clientX-C,Z=B.clientY-P;I.moved=Y*Y+Z*Z>x}I.event(B).zoom("mouse",n(m(I.that.__zoom,I.mouse[0]=Ye(B,g),I.mouse[1]),I.extent,s))}function te(B){S.on("mousemove.zoom mouseup.zoom",null),ss(B.view,I.moved),Ut(B),I.event(B).end()}}function G(f,...N){if(e.apply(this,arguments)){var g=this.__zoom,I=Ye(f.changedTouches?f.changedTouches[0]:f,this),S=g.invert(I),D=g.k*(f.shiftKey?.5:2),C=n(m(T(g,D),I,S),t.apply(this,N),s);Ut(f),a>0?Oe(this).transition().duration(a).call(O,C,I,f):Oe(this).call(b.transform,C,I,f)}}function F(f,...N){if(e.apply(this,arguments)){var g=f.touches,I=g.length,S=X(this,N,f.changedTouches.length===I).event(f),D,C,P,W;for(Io(f),C=0;C<I;++C)P=g[C],W=Ye(P,this),W=[W,this.__zoom.invert(W),P.identifier],S.touch0?!S.touch1&&S.touch0[2]!==W[2]&&(S.touch1=W,S.taps=0):(S.touch0=W,D=!0,S.taps=1+!!c);c&&(c=clearTimeout(c)),D&&(S.taps<2&&(d=W[0],c=setTimeout(function(){c=null},p)),Vn(this),S.start())}}function k(f,...N){if(this.__zooming){var g=X(this,N).event(f),I=f.changedTouches,S=I.length,D,C,P,W;for(Ut(f),D=0;D<S;++D)C=I[D],P=Ye(C,this),g.touch0&&g.touch0[2]===C.identifier?g.touch0[0]=P:g.touch1&&g.touch1[2]===C.identifier&&(g.touch1[0]=P);if(C=g.that.__zoom,g.touch1){var te=g.touch0[0],B=g.touch0[1],Y=g.touch1[0],Z=g.touch1[1],re=(re=Y[0]-te[0])*re+(re=Y[1]-te[1])*re,le=(le=Z[0]-B[0])*le+(le=Z[1]-B[1])*le;C=T(C,Math.sqrt(re/le)),P=[(te[0]+Y[0])/2,(te[1]+Y[1])/2],W=[(B[0]+Z[0])/2,(B[1]+Z[1])/2]}else if(g.touch0)P=g.touch0[0],W=g.touch0[1];else return;g.zoom("touch",n(m(C,P,W),g.extent,s))}}function K(f,...N){if(this.__zooming){var g=X(this,N).event(f),I=f.changedTouches,S=I.length,D,C;for(Io(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),D=0;D<S;++D)C=I[D],g.touch0&&g.touch0[2]===C.identifier?delete g.touch0:g.touch1&&g.touch1[2]===C.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(C=Ye(C,this),Math.hypot(d[0]-C[0],d[1]-C[1])<$)){var P=Oe(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return b.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:Sn(+f),b):o},b.filter=function(f){return arguments.length?(e=typeof f=="function"?f:Sn(!!f),b):e},b.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:Sn(!!f),b):i},b.extent=function(f){return arguments.length?(t=typeof f=="function"?f:Sn([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),b):t},b.scaleExtent=function(f){return arguments.length?(r[0]=+f[0],r[1]=+f[1],b):[r[0],r[1]]},b.translateExtent=function(f){return arguments.length?(s[0][0]=+f[0][0],s[1][0]=+f[1][0],s[0][1]=+f[0][1],s[1][1]=+f[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(f){return arguments.length?(n=f,b):n},b.duration=function(f){return arguments.length?(a=+f,b):a},b.interpolate=function(f){return arguments.length?(l=f,b):l},b.on=function(){var f=u.on.apply(u,arguments);return f===u?b:f},b.clickDistance=function(f){return arguments.length?(x=(f=+f)*f,b):Math.sqrt(x)},b.tapDistance=function(f){return arguments.length?($=+f,b):$},b}var j=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(j||{}),bi=(e=>(e.Partial="partial",e.Full="full",e))(bi||{}),wt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(wt||{}),ft=(e=>(e.Strict="strict",e.Loose="loose",e))(ft||{}),Jo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Jo||{}),on=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(on||{}),_s=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(_s||{});const nf=["INPUT","SELECT","TEXTAREA"],of=typeof document<"u"?document:null;function Qo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,r=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return nf.includes(o==null?void 0:o.nodeName)||i||!!r}function rf(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function ji(e,t,n,o){const i=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(s=>s.trim().toLowerCase());if(i.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=i.every((s,a)=>n.has(s)&&Array.from(n.values())[a]===i[a]);return o&&n.delete(e.toLowerCase()),r}function sf(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=af(n.code,e);return Array.isArray(e)?e.some(i=>ji(n[o],i,t,n.type==="keyup")):ji(n[o],e,t,n.type==="keyup")}}function af(e,t){return t.includes(e)?"code":"key"}function rn(e,t){const n=oe(()=>fe(t==null?void 0:t.target)??of),o=Xn(fe(e)===!0);let i=!1;const r=new Set;let s=l(fe(e));me(()=>fe(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&a(),s=l(u)},{immediate:!0}),Wr(["blur","contextmenu"],a),Pi((...u)=>s(...u),u=>{var c,d;const h=fe(t==null?void 0:t.actInsideInputWithModifier)??!0,p=fe(t==null?void 0:t.preventDefault)??!1;if(i=rf(u),(!i||i&&!h)&&Qo(u))return;const x=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,$=(x==null?void 0:x.nodeName)==="BUTTON"||(x==null?void 0:x.nodeName)==="A";!p&&(i||!$)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),Pi((...u)=>s(...u),u=>{const c=fe(t==null?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!i||i&&!c)&&Qo(u))return;i=!1,o.value=!1}},{eventName:"keyup",target:n});function a(){i=!1,r.clear(),o.value=fe(e)===!0}function l(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?sf(u,r):u}return o}const bs="vue-flow__node-desc",$s="vue-flow__edge-desc",lf="vue-flow__aria-live",xs=["Enter"," ","Escape"],Ot={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function jn(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function eo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function go(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Tt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Es(e,t){return{x:Tt(e.x,t[0][0],t[1][0]),y:Tt(e.y,t[0][1],t[1][1])}}function er(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function ht(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function St(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!ht(e)}function Qt(e){return St(e)&&"computedPosition"in e}function Nn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function uf(e){return Nn(e.width)&&Nn(e.height)&&Nn(e.x)&&Nn(e.y)}function cf(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:tn({width:0,height:0}),computedPosition:tn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Se(e.data)?e.data:{},events:tn(Se(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Ss(e,t,n){var o,i;const r={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Se(e.data)?e.data:{},events:tn(Se(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function Ns(e,t,n,o){const i=typeof e=="string"?e:e.id,r=new Set,s=o==="source"?"target":"source";for(const a of n)a[s]===i&&r.add(a[o]);return t.filter(a=>r.has(a.id))}function df(...e){if(e.length===3){const[r,s,a]=e;return Ns(r,s,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>ht(r)&&r.source===o).map(r=>n.find(s=>St(s)&&s.id===r.target))}function ff(...e){if(e.length===3){const[r,s,a]=e;return Ns(r,s,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>ht(r)&&r.target===o).map(r=>n.find(s=>St(s)&&s.id===r.source))}function ks({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function hf(e,t){return t.some(n=>ht(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function jo({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function cn({x:e,y:t},{x:n,y:o,zoom:i},r=!1,s=[1,1]){const a={x:(e-n)/i,y:(t-o)/i};return r?vo(a,s):a}function Cs(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function to({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Ms({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function pf(e,t){return Ms(Cs(to(e),to(t)))}function $i(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=Cs(t,to({...o.computedPosition,...o.dimensions}))}return Ms(t)}function Is(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...cn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,h=l.height??a.height??null;if(i&&!u||c)continue;const p=eo(r,jn(a)),E=d===null||h===null,x=o&&p>0,$=(d??0)*(h??0);(E||x||p>=$||a.dragging)&&s.push(a)}return s}function _t(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function tr(e,t,n,o,i,r=.1,s={x:0,y:0}){const a=t/(e.width*(1+r)),l=n/(e.height*(1+r)),u=Math.min(a,l),c=Tt(u,o,i),d=e.x+e.width/2,h=e.y+e.height/2,p=t/2-d*c+(s.x??0),E=n/2-h*c+(s.y??0);return{x:p,y:E,zoom:c}}function gf(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Ts(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Ts(n,t):!1}function dn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function nr(e,t,n){return e<t?Tt(Math.abs(e-t),1,t)/t:e>n?-Tt(Math.abs(e-n),1,t)/t:0}function Ds(e,t,n=15,o=40){const i=nr(e.x,o,t.width-o)*n,r=nr(e.y,o,t.height-o)*n;return[i,r]}function To(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof i.width=="string"){const s=Number(i.width.replace("px",""));i.width=`${s+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof i.height=="string"){const s=Number(i.height.replace("px",""));i.height=`${s+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const s=t.style;return{...s(r),...i}}:t.style={...t.style,...i}}}}function or(e,t){var n,o;const i=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of i)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(l=>l.id===s.id);a!==-1&&t.splice(a,1)}const r=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(Qt(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const l=t[r.indexOf(s.parentNode)];l&&Qt(l)&&To(s,l)}break;case"dimensions":if(Qt(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const l=t[r.indexOf(s.parentNode)];l&&Qt(l)&&(!!l.dimensions.width&&!!l.dimensions.height?To(s,l):ot(()=>{To(s,l)}))}break}return t}function at(e,t){return{id:e,type:"select",selected:t}}function ir(e){return{item:e,type:"add"}}function rr(e){return{id:e,type:"remove"}}function sr(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function ut(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const s=t.has(i);!(r.selected===void 0&&!s)&&r.selected!==s&&(n&&(r.selected=s),o.push(at(r.id,s)))}return o}function U(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=a=>{t.delete(a)};return{on:a=>{e&&n&&t.delete(e),t.add(a);const l=()=>{i(a),e&&n&&t.add(e)};return uo(l),{off:l}},off:i,trigger:a=>Promise.all(Array.from(t).map(l=>l(a))),hasListeners:o,fns:t}}function ar(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function vf(e,t,n,o,i){var r,s;const a=[];for(const l of e)(l.selected||l.id===i)&&(!l.parentNode||!Ts(l,o))&&(l.draggable||t&&typeof l.draggable>"u")&&a.push(tn({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((s=l.computedPosition)==null?void 0:s.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return a}function Do({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const r=n(i.id);r&&o.push(r)}return[e?o.find(i=>i.id===e):o[0],o]}function As(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function mf(e,t,n){const[o,i,r,s]=typeof e!="string"?As(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+s,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]:!1}function yf(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=mf(i,e,o);r&&(i=r)}else t(new ke(Ne.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=(o==null?void 0:o.computedPosition.x)||0,s=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+r,i[0][1]+s],[i[1][0]+r,i[1][1]+s]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[r,s,a,l]=As(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+l,i.range[0][1]+c+r],[i.range[1][0]+u-s,i.range[1][1]+c-a]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function wf({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function xi(e,t,n,o,i){const r=wf(e.dimensions,yf(e,n,o,i)),s=Es(t,r);return{position:{x:s.x-((i==null?void 0:i.computedPosition.x)||0),y:s.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:s}}function Lt(e,t,n=j.Left,o=!1){const i=((t==null?void 0:t.x)??0)+e.computedPosition.x,r=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:s,height:a}=t??xf(e);if(o)return{x:i+s/2,y:r+a/2};switch((t==null?void 0:t.position)??n){case j.Top:return{x:i+s/2,y:r};case j.Right:return{x:i+s,y:r+a/2};case j.Bottom:return{x:i+s/2,y:r+a};case j.Left:return{x:i,y:r+a/2}}}function lr(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function _f({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:s,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=to({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),h=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*h)>0}function bf(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const r=t(e.source),s=t(e.target);return!r||!s?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,s.computedPosition.z||0)),i)}var Ne=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ne||{});const ur={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class ke extends Error{constructor(t,...n){var o;super((o=ur[t])==null?void 0:o.call(ur,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Ei(e){return"clientX"in e}function $f(e){return"sourceEvent"in e}function We(e,t){const n=Ei(e);let o,i;return n?(o=e.clientX,i=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,i=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(o=0,i=0),{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}const no=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function xf(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function vo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Ef=()=>!0;function Ao(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Sf(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())eo(i,jn(r))>0&&o.push(r);return o}const Nf=250;function kf(e,t,n,o){var i,r;let s=[],a=Number.POSITIVE_INFINITY;const l=Sf(e,n,t+Nf);for(const u of l){const c=[...((i=u.handleBounds)==null?void 0:i.source)??[],...((r=u.handleBounds)==null?void 0:r.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:h,y:p}=Lt(u,d,d.position,!0),E=Math.sqrt((h-e.x)**2+(p-e.y)**2);E>t||(E<a?(s=[{...d,x:h,y:p}],a=E):E===a&&s.push({...d,x:h,y:p}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function cr(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:s,lib:a,flowId:l,isValidConnection:u=Ef},c,d,h){const p=r==="target",E=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x,y:$}=We(e),b=s.elementFromPoint(x,$),T=b!=null&&b.classList.contains(`${a}-flow__handle`)?b:E,m={handleDomNode:T,isValid:!1,connection:null,toHandle:null};if(T){const M=zs(void 0,T),O=T.getAttribute("data-nodeid"),X=T.getAttribute("data-handleid"),R=T.classList.contains("connectable"),V=T.classList.contains("connectableend");if(!O||!M)return m;const ee={source:p?O:o,sourceHandle:p?X:i,target:p?o:O,targetHandle:p?i:X};m.connection=ee;const F=R&&V&&(n===ft.Strict?p&&M==="source"||!p&&M==="target":O!==o||X!==i);m.isValid=F&&u(ee,{nodes:d,edges:c,sourceNode:h(o),targetNode:h(O)}),m.toHandle=t}return m}function zs(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Cf(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Mf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function If(e,t,n,o,i,r=!1){var s,a,l;const u=o.get(e);if(!u)return null;const c=i===ft.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c==null?void 0:c.find(h=>h.id===n):c==null?void 0:c[0])??null;return d&&r?{...d,...Lt(u,d,d.position,!0)}:d}const ei={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top},Tf=["production","prod"];function mo(e,...t){Ps()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ps(){return!Tf.includes("production")}function dr(e,t,n,o,i){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return r!=null&&r.length?Array.from(r).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...go(s)}}):null}function ti(e,t,n,o,i,r=!1,s){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),ot(()=>{s.blur()})):n([e])}function Se(e){return typeof L(e)<"u"}function Df(e,t,n,o){if(!e||!e.source||!e.target)return n(new ke(Ne.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return ht(e)?i=e:i={...e,id:ks(e)},i=Ss(i,void 0,o),hf(i,t)?!1:i}function Af(e,t,n,o,i){if(!t.source||!t.target)return i(new ke(Ne.EDGE_INVALID,e.id)),!1;if(!n)return i(new ke(Ne.EDGE_NOT_FOUND,e.id)),!1;const{id:r,...s}=e;return{...s,id:o?ks(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function fr(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const s=e[r];if(!St(s)){n(new ke(Ne.NODE_INVALID,s==null?void 0:s.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const a=cf(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),i[r]=a}for(const r of i){const s=t(r.parentNode)||i.find(a=>a.id===r.parentNode);r.parentNode&&!s&&n(new ke(Ne.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),s&&(s.isParent=!0))}return i}function hr(e,t,n,o,i,r){let s=i;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${i}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),r){s=`${i}-${e}-${r}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function zo(e,t,n){e.clear();for(const o of n){const{source:i,target:r,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:i,target:r,sourceHandle:s,targetHandle:a},u=`${i}-${s}--${r}-${a}`,c=`${r}-${a}--${i}-${s}`;hr("source",l,c,e,i,s),hr("target",l,u,e,r,a)}}function pr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Po(e,t,n,o,i,r,s,a){const l=[];for(const u of e){const c=ht(u)?u:Df(u,a,i,r);if(!c)continue;const d=n(c.source),h=n(c.target);if(!d||!h){i(new ke(Ne.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new ke(Ne.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!h){i(new ke(Ne.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:s,sourceNode:d,targetNode:h})){i(new ke(Ne.EDGE_INVALID,c.id));continue}const p=o(c.id);l.push({...Ss(c,p,r),sourceNode:d,targetNode:h})}return l}const gr=Symbol("vueFlow"),Bs=Symbol("nodeId"),Os=Symbol("nodeRef"),zf=Symbol("edgeId"),Pf=Symbol("edgeRef"),yo=Symbol("slots");function Rs(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:r,nodeExtent:s,nodeDragThreshold:a,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:h,findNode:p,multiSelectionActive:E,nodesSelectionActive:x,selectNodesOnDrag:$,removeSelectedElements:b,addSelectedNodes:T,updateNodePositions:m,emits:M}=be(),{onStart:O,onDrag:X,onStop:R,onClick:V,el:ee,disabled:G,id:F,selectable:k,dragHandle:K}=e,f=Xn(!1);let N=[],g,I=null,S={x:void 0,y:void 0},D={x:0,y:0},C=null,P=!1,W=0,te=!1;const B=Rf(),Y=({x:ie,y:ue})=>{S={x:ie,y:ue};let ce=!1;if(N=N.map(y=>{const v={x:ie-y.distance.x,y:ue-y.distance.y},{computedPosition:_}=xi(y,n.value?vo(v,o.value):v,M.error,s.value,y.parentNode?p(y.parentNode):void 0);return ce=ce||y.position.x!==_.x||y.position.y!==_.y,y.position=_,y}),!!ce&&(m(N,!0,!0),f.value=!0,C)){const[y,v]=Do({id:F,dragItems:N,findNode:p});X({event:C,node:y,nodes:v})}},Z=()=>{if(!I)return;const[ie,ue]=Ds(D,I,c.value);if(ie!==0||ue!==0){const ce={x:(S.x??0)-ie/l.value.zoom,y:(S.y??0)-ue/l.value.zoom};h({x:ie,y:ue})&&Y(ce)}W=requestAnimationFrame(Z)},re=(ie,ue)=>{P=!0;const ce=p(F);!$.value&&!E.value&&ce&&(ce.selected||b()),ce&&fe(k)&&$.value&&ti(ce,E.value,T,b,x,!1,ue);const y=B(ie.sourceEvent);if(S=y,N=vf(r.value,d.value,y,p,F),N.length){const[v,_]=Do({id:F,dragItems:N,findNode:p});O({event:ie.sourceEvent,node:v,nodes:_})}},le=(ie,ue)=>{var ce;ie.sourceEvent.type==="touchmove"&&ie.sourceEvent.touches.length>1||(a.value===0&&re(ie,ue),S=B(ie.sourceEvent),I=((ce=t.value)==null?void 0:ce.getBoundingClientRect())||null,D=We(ie.sourceEvent,I))},se=(ie,ue)=>{const ce=B(ie.sourceEvent);if(!te&&P&&u.value&&(te=!0,Z()),!P){const y=ce.xSnapped-(S.x??0),v=ce.ySnapped-(S.y??0);Math.sqrt(y*y+v*v)>a.value&&re(ie,ue)}(S.x!==ce.xSnapped||S.y!==ce.ySnapped)&&N.length&&P&&(C=ie.sourceEvent,D=We(ie.sourceEvent,I),Y(ce))},ge=ie=>{let ue=!1;if(!P&&!f.value&&!E.value){const ce=ie.sourceEvent,y=B(ce),v=y.xSnapped-(S.x??0),_=y.ySnapped-(S.y??0),w=Math.sqrt(v*v+_*_);w!==0&&w<=a.value&&(V==null||V(ce),ue=!0)}if(N.length&&!ue){m(N,!1,!1);const[ce,y]=Do({id:F,dragItems:N,findNode:p});R({event:ie.sourceEvent,node:ce,nodes:y})}N=[],f.value=!1,te=!1,P=!1,S={x:void 0,y:void 0},cancelAnimationFrame(W)};return me([()=>fe(G),ee],([ie,ue],ce,y)=>{if(ue){const v=Oe(ue);ie||(g=lc().on("start",_=>le(_,ue)).on("drag",_=>se(_,ue)).on("end",_=>ge(_)).filter(_=>{const w=_.target,z=fe(K);return!_.button&&(!i.value||!ar(w,`.${i.value}`,ue)&&(!z||ar(w,z,ue)))}),v.call(g)),y(()=>{v.on(".drag",null),g&&(g.on("start",null),g.on("drag",null),g.on("end",null))})}}),f}function Bf(){return{doubleClick:U(),click:U(),mouseEnter:U(),mouseMove:U(),mouseLeave:U(),contextMenu:U(),updateStart:U(),update:U(),updateEnd:U()}}function Of(e,t){const n=Bf();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function Rf(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=be();return i=>{var r;const s=((r=o.value)==null?void 0:r.getBoundingClientRect())??{left:0,top:0},a=$f(i)?i.sourceEvent:i,{x:l,y:u}=We(a,s),c=cn({x:l,y:u},e.value),{x:d,y:h}=n.value?vo(c,t.value):c;return{xSnapped:d,ySnapped:h,...c}}}function kn(){return!0}function Vs({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:s}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:h,nodesConnectable:p,autoPanOnConnect:E,autoPanSpeed:x,findNode:$,panBy:b,startConnection:T,updateConnection:m,endConnection:M,emits:O,viewport:X,edges:R,nodes:V,isValidConnection:ee,nodeLookup:G}=be();let F=null,k=!1,K=null;function f(g){var I;const S=fe(n)==="target",D=Ei(g),C=er(g.target);if(D&&g.button===0||!D){let P=function(ae){y=We(ae,ie),Y=kf(cn(y,X.value,!1,[1,1]),c.value,G.value,w),v||(_(),v=!0);const de=cr(ae,{handle:Y,connectionMode:u.value,fromNodeId:fe(t),fromHandleId:fe(e),fromType:S?"target":"source",isValidConnection:B,doc:C,lib:"vue",flowId:a,nodeLookup:G.value},R.value,V.value,$);K=de.handleDomNode,F=de.connection,k=Mf(!!Y,de.isValid);const he={...Q,isValid:k,to:de.toHandle&&k?jo({x:de.toHandle.x,y:de.toHandle.y},X.value):y,toHandle:de.toHandle,toPosition:k&&de.toHandle?de.toHandle.position:ei[w.position],toNode:de.toHandle?G.value.get(de.toHandle.nodeId):null};if(!(k&&Y&&(Q!=null&&Q.toHandle)&&he.toHandle&&Q.toHandle.type===he.toHandle.type&&Q.toHandle.nodeId===he.toHandle.nodeId&&Q.toHandle.id===he.toHandle.id&&Q.to.x===he.to.x&&Q.to.y===he.to.y)){if(m(Y&&k?jo({x:Y.x,y:Y.y},X.value):y,de.toHandle,Cf(!!Y,k)),Q=he,!Y&&!k&&!K)return Ao(ce);F&&F.source!==F.target&&K&&(Ao(ce),ce=K,K.classList.add("connecting","vue-flow__handle-connecting"),K.classList.toggle("valid",!!k),K.classList.toggle("vue-flow__handle-valid",!!k))}},W=function(ae){(Y||K)&&F&&k&&(r?r(ae,F):O.connect(F)),O.connectEnd(ae),i&&(s==null||s(ae)),Ao(ce),cancelAnimationFrame(Z),M(ae),v=!1,k=!1,F=null,K=null,C.removeEventListener("mousemove",P),C.removeEventListener("mouseup",W),C.removeEventListener("touchmove",P),C.removeEventListener("touchend",W)};const te=$(fe(t));let B=fe(o)||ee.value||kn;!B&&te&&(B=(S?te.isValidSourcePos:te.isValidTargetPos)||kn);let Y,Z=0;const{x:re,y:le}=We(g),se=C==null?void 0:C.elementFromPoint(re,le),ge=zs(fe(i),se),ie=(I=l.value)==null?void 0:I.getBoundingClientRect();if(!ie||!ge)return;const ue=If(fe(t),ge,fe(e),G.value,u.value);if(!ue)return;let ce,y=We(g,ie),v=!1;const _=()=>{if(!E.value)return;const[ae,de]=Ds(y,ie,x.value);b({x:ae,y:de}),Z=requestAnimationFrame(_)},w={...ue,nodeId:fe(t),type:ge,position:ue.position},z=G.value.get(fe(t)),J={inProgress:!0,isValid:null,from:Lt(z,w,j.Left,!0),fromHandle:w,fromPosition:w.position,fromNode:z,to:y,toHandle:null,toPosition:ei[w.position],toNode:null};T({nodeId:fe(t),id:fe(e),type:ge,position:(se==null?void 0:se.getAttribute("data-handlepos"))||j.Top,...y},{x:re-ie.left,y:le-ie.top}),O.connectStart({event:g,nodeId:fe(t),handleId:fe(e),handleType:ge});let Q=J;C.addEventListener("mousemove",P),C.addEventListener("mouseup",W),C.addEventListener("touchmove",P),C.addEventListener("touchend",W)}}function N(g){var I,S;if(!d.value)return;const D=fe(n)==="target";if(!h.value){O.clickConnectStart({event:g,nodeId:fe(t),handleId:fe(e)}),T({nodeId:fe(t),type:fe(n),id:fe(e),position:j.Top,...We(g)},void 0,!0);return}let C=fe(o)||ee.value||kn;const P=$(fe(t));if(!C&&P&&(C=(D?P.isValidSourcePos:P.isValidTargetPos)||kn),P&&(typeof P.connectable>"u"?p.value:P.connectable)===!1)return;const W=er(g.target),te=cr(g,{handle:{nodeId:fe(t),id:fe(e),type:fe(n),position:j.Top,...We(g)},connectionMode:u.value,fromNodeId:h.value.nodeId,fromHandleId:h.value.id??null,fromType:h.value.type,isValidConnection:C,doc:W,lib:"vue",flowId:a,nodeLookup:G.value},R.value,V.value,$),B=((I=te.connection)==null?void 0:I.source)===((S=te.connection)==null?void 0:S.target);te.isValid&&te.connection&&!B&&O.connect(te.connection),O.clickConnectEnd(g),M(g,!0)}return{handlePointerDown:f,handleClick:N}}function Vf(){return At(Bs,"")}function Hs(e){const t=e??Vf()??"",n=At(Os,ve(null)),{findNode:o,edges:i,emits:r}=be(),s=o(t);return s||r.error(new ke(Ne.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:oe(()=>o(s.parentNode)),connectedEdges:oe(()=>_t([s],i.value))}}function Hf(){return{doubleClick:U(),click:U(),mouseEnter:U(),mouseMove:U(),mouseLeave:U(),contextMenu:U(),dragStart:U(),drag:U(),dragStop:U()}}function Ff(e,t){const n=Hf();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function Fs(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:s,emits:a}=be();return(l,u=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,h=u?4:1,p=l.x*c*h,E=l.y*d*h,x=[];for(const $ of e.value)if($.draggable||s&&typeof $.draggable>"u"){const b={x:$.computedPosition.x+p,y:$.computedPosition.y+E},{computedPosition:T}=xi($,b,a.error,t.value,$.parentNode?o($.parentNode):void 0);x.push({id:$.id,position:T,from:$.position,distance:{x:l.x,y:l.y},dimensions:$.dimensions})}n(x,!0,!1)}}const Bo=.1,Lf=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function st(){return mo("Viewport not initialized yet."),Promise.resolve(!1)}const Yf={zoomIn:st,zoomOut:st,zoomTo:st,fitView:st,setCenter:st,fitBounds:st,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:st,setTransform:st,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Xf(e){function t(o,i){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((i==null?void 0:i.interpolate)==="linear"?nn:Bn).scaleBy(Oo(e.d3Selection,i==null?void 0:i.duration,i==null?void 0:i.ease,()=>{r(!0)}),o):r(!1)})}function n(o,i,r,s){return new Promise(a=>{var l;const{x:u,y:c}=Es({x:-o,y:-i},e.translateExtent),d=Ft.translate(-u,-c).scale(r);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate((s==null?void 0:s.interpolate)==="linear"?nn:Bn).transform(Oo(e.d3Selection,s==null?void 0:s.duration,s==null?void 0:s.ease,()=>{a(!0)}),d):a(!1)})}return oe(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i),zoomOut:i=>t(1/1.2,i),zoomTo:(i,r)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((r==null?void 0:r.interpolate)==="linear"?nn:Bn).scaleTo(Oo(e.d3Selection,r==null?void 0:r.duration,r==null?void 0:r.ease,()=>{s(!0)}),i):s(!1)}),setViewport:(i,r)=>n(i.x,i.y,i.zoom,r),setTransform:(i,r)=>n(i.x,i.y,i.zoom,r),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Bo,includeHiddenNodes:!1,duration:0})=>{var r,s;const a=[];for(const h of e.nodes)h.dimensions.width&&h.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!h.hidden)&&(!((r=i.nodes)!=null&&r.length)||(s=i.nodes)!=null&&s.length&&i.nodes.includes(h.id))&&a.push(h);if(!a.length)return Promise.resolve(!1);const l=$i(a),{x:u,y:c,zoom:d}=tr(l,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Bo,i.offset);return n(u,c,d,i)},setCenter:(i,r,s)=>{const a=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-i*a,u=e.dimensions.height/2-r*a;return n(l,u,a,s)},fitBounds:(i,r={padding:Bo})=>{const{x:s,y:a,zoom:l}=tr(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding);return n(s,a,l,r)},project:i=>cn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x-r,y:i.y-s};return cn(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x+r,y:i.y+s};return jo(a,e.viewport)}return{x:0,y:0}}}:Yf)}function Oo(e,t=0,n=Lf,o=()=>{}){const i=typeof t=="number"&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function Gf(e,t,n){const o=Vr(!0);return o.run(()=>{const i=()=>{o.run(()=>{let x,$,b=!!(n.nodes.value.length||n.edges.value.length);x=zt([e.modelValue,()=>{var T,m;return(m=(T=e.modelValue)==null?void 0:T.value)==null?void 0:m.length}],([T])=>{T&&Array.isArray(T)&&($==null||$.pause(),n.setElements(T),!$&&!b&&T.length?b=!0:$==null||$.resume())}),$=zt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([T,m])=>{var M;(M=e.modelValue)!=null&&M.value&&Array.isArray(e.modelValue.value)&&(x==null||x.pause(),e.modelValue.value=[...T,...m],ot(()=>{x==null||x.resume()}))},{immediate:b}),zn(()=>{x==null||x.stop(),$==null||$.stop()})})},r=()=>{o.run(()=>{let x,$,b=!!n.nodes.value.length;x=zt([e.nodes,()=>{var T,m;return(m=(T=e.nodes)==null?void 0:T.value)==null?void 0:m.length}],([T])=>{T&&Array.isArray(T)&&($==null||$.pause(),n.setNodes(T),!$&&!b&&T.length?b=!0:$==null||$.resume())}),$=zt([n.nodes,()=>n.nodes.value.length],([T])=>{var m;(m=e.nodes)!=null&&m.value&&Array.isArray(e.nodes.value)&&(x==null||x.pause(),e.nodes.value=[...T],ot(()=>{x==null||x.resume()}))},{immediate:b}),zn(()=>{x==null||x.stop(),$==null||$.stop()})})},s=()=>{o.run(()=>{let x,$,b=!!n.edges.value.length;x=zt([e.edges,()=>{var T,m;return(m=(T=e.edges)==null?void 0:T.value)==null?void 0:m.length}],([T])=>{T&&Array.isArray(T)&&($==null||$.pause(),n.setEdges(T),!$&&!b&&T.length?b=!0:$==null||$.resume())}),$=zt([n.edges,()=>n.edges.value.length],([T])=>{var m;(m=e.edges)!=null&&m.value&&Array.isArray(e.edges.value)&&(x==null||x.pause(),e.edges.value=[...T],ot(()=>{x==null||x.resume()}))},{immediate:b}),zn(()=>{x==null||x.stop(),$==null||$.stop()})})},a=()=>{o.run(()=>{me(()=>t.maxZoom,()=>{t.maxZoom&&Se(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{me(()=>t.minZoom,()=>{t.minZoom&&Se(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{me(()=>t.translateExtent,()=>{t.translateExtent&&Se(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{me(()=>t.nodeExtent,()=>{t.nodeExtent&&Se(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{me(()=>t.applyDefault,()=>{Se(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},h=()=>{o.run(()=>{const x=async $=>{let b=$;typeof t.autoConnect=="function"&&(b=await t.autoConnect($)),b!==!1&&n.addEdges([b])};me(()=>t.autoConnect,()=>{Se(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),me(n.autoConnect,($,b,T)=>{$?n.onConnect(x):n.hooks.value.connect.off(x),T(()=>{n.hooks.value.connect.off(x)})},{immediate:!0})})},p=()=>{const x=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const $ of Object.keys(t)){const b=$;if(!x.includes(b)){const T=_e(()=>t[b]),m=n[b];fi(m)&&o.run(()=>{me(T,M=>{Se(M)&&(m.value=M)},{immediate:!0})})}}};(()=>{i(),r(),s(),l(),a(),u(),c(),d(),h(),p()})()}),()=>o.stop()}function Wf(){return{edgesChange:U(),nodesChange:U(),nodeDoubleClick:U(),nodeClick:U(),nodeMouseEnter:U(),nodeMouseMove:U(),nodeMouseLeave:U(),nodeContextMenu:U(),nodeDragStart:U(),nodeDrag:U(),nodeDragStop:U(),nodesInitialized:U(),miniMapNodeClick:U(),miniMapNodeDoubleClick:U(),miniMapNodeMouseEnter:U(),miniMapNodeMouseMove:U(),miniMapNodeMouseLeave:U(),connect:U(),connectStart:U(),connectEnd:U(),clickConnectStart:U(),clickConnectEnd:U(),paneReady:U(),init:U(),move:U(),moveStart:U(),moveEnd:U(),selectionDragStart:U(),selectionDrag:U(),selectionDragStop:U(),selectionContextMenu:U(),selectionStart:U(),selectionEnd:U(),viewportChangeStart:U(),viewportChange:U(),viewportChangeEnd:U(),paneScroll:U(),paneClick:U(),paneContextMenu:U(),paneMouseEnter:U(),paneMouseMove:U(),paneMouseLeave:U(),edgeContextMenu:U(),edgeMouseEnter:U(),edgeMouseMove:U(),edgeMouseLeave:U(),edgeDoubleClick:U(),edgeClick:U(),edgeUpdateStart:U(),edgeUpdate:U(),edgeUpdateEnd:U(),updateNodeInternals:U(),error:U(e=>mo(e.message))}}function Uf(e,t){Ca(()=>{for(const[n,o]of Object.entries(t.value)){const i=r=>{e(n,r)};o.fns.add(i),uo(()=>{o.off(i)})}})}function Ls(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:bi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:on.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:wt.Bezier,style:{}},connectionMode:ft.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:no()?"Meta":"Control",zoomActivationKeyCode:no()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Wf(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Zf=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Kf(e,t,n){const o=Xf(e),i=y=>{const v=y??[];e.hooks.updateNodeInternals.trigger(v)},r=y=>ff(y,e.nodes,e.edges),s=y=>df(y,e.nodes,e.edges),a=y=>_t(y,e.edges),l=({id:y,type:v,nodeId:_})=>{var w;return Array.from(((w=e.connectionLookup.get(`${_}-${v}-${y??null}`))==null?void 0:w.values())??[])},u=y=>{if(y)return t.value.get(y)},c=y=>{if(y)return n.value.get(y)},d=(y,v,_)=>{var w,z;const ne=[];for(const J of y){const Q={id:J.id,type:"position",dragging:_,from:J.from};if(v&&(Q.position=J.position,J.parentNode)){const ae=u(J.parentNode);Q.position={x:Q.position.x-(((w=ae==null?void 0:ae.computedPosition)==null?void 0:w.x)??0),y:Q.position.y-(((z=ae==null?void 0:ae.computedPosition)==null?void 0:z.y)??0)}}ne.push(Q)}ne!=null&&ne.length&&e.hooks.nodesChange.trigger(ne)},h=y=>{if(!e.vueFlowRef)return;const v=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!v)return;const _=window.getComputedStyle(v),{m22:w}=new window.DOMMatrixReadOnly(_.transform),z=[];for(const ne of y){const J=ne,Q=u(J.id);if(Q){const ae=go(J.nodeElement);if(!!(ae.width&&ae.height&&(Q.dimensions.width!==ae.width||Q.dimensions.height!==ae.height||J.forceUpdate))){const he=J.nodeElement.getBoundingClientRect();Q.dimensions=ae,Q.handleBounds.source=dr("source",J.nodeElement,he,w,Q.id),Q.handleBounds.target=dr("target",J.nodeElement,he,w,Q.id),z.push({id:Q.id,type:"dimensions",dimensions:ae})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),z.length&&e.hooks.nodesChange.trigger(z)},p=(y,v)=>{const _=new Set,w=new Set;for(const J of y)St(J)?_.add(J.id):ht(J)&&w.add(J.id);const z=ut(t.value,_,!0),ne=ut(n.value,w);if(e.multiSelectionActive){for(const J of _)z.push(at(J,v));for(const J of w)ne.push(at(J,v))}z.length&&e.hooks.nodesChange.trigger(z),ne.length&&e.hooks.edgesChange.trigger(ne)},E=y=>{if(e.multiSelectionActive){const v=y.map(_=>at(_.id,!0));e.hooks.nodesChange.trigger(v);return}e.hooks.nodesChange.trigger(ut(t.value,new Set(y.map(v=>v.id)),!0)),e.hooks.edgesChange.trigger(ut(n.value))},x=y=>{if(e.multiSelectionActive){const v=y.map(_=>at(_.id,!0));e.hooks.edgesChange.trigger(v);return}e.hooks.edgesChange.trigger(ut(n.value,new Set(y.map(v=>v.id)))),e.hooks.nodesChange.trigger(ut(t.value,new Set,!0))},$=y=>{p(y,!0)},b=y=>{const _=(y||e.nodes).map(w=>(w.selected=!1,at(w.id,!1)));e.hooks.nodesChange.trigger(_)},T=y=>{const _=(y||e.edges).map(w=>(w.selected=!1,at(w.id,!1)));e.hooks.edgesChange.trigger(_)},m=y=>{if(!y||!y.length)return p([],!1);const v=y.reduce((_,w)=>{const z=at(w.id,!1);return St(w)?_.nodes.push(z):_.edges.push(z),_},{nodes:[],edges:[]});v.nodes.length&&e.hooks.nodesChange.trigger(v.nodes),v.edges.length&&e.hooks.edgesChange.trigger(v.edges)},M=y=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([y,e.maxZoom]),e.minZoom=y},O=y=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([e.minZoom,y]),e.maxZoom=y},X=y=>{var v;(v=e.d3Zoom)==null||v.translateExtent(y),e.translateExtent=y},R=y=>{e.nodeExtent=y,i()},V=y=>{var v;(v=e.d3Zoom)==null||v.clickDistance(y)},ee=y=>{e.nodesDraggable=y,e.nodesConnectable=y,e.elementsSelectable=y},G=y=>{const v=y instanceof Function?y(e.nodes):y;!e.initialized&&!v.length||(e.nodes=fr(v,u,e.hooks.error.trigger))},F=y=>{const v=y instanceof Function?y(e.edges):y;if(!e.initialized&&!v.length)return;const _=Po(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);zo(e.connectionLookup,n.value,_),e.edges=_},k=y=>{const v=y instanceof Function?y([...e.nodes,...e.edges]):y;!e.initialized&&!v.length||(G(v.filter(St)),F(v.filter(ht)))},K=y=>{let v=y instanceof Function?y(e.nodes):y;v=Array.isArray(v)?v:[v];const _=fr(v,u,e.hooks.error.trigger),w=[];for(const z of _)w.push(ir(z));w.length&&e.hooks.nodesChange.trigger(w)},f=y=>{let v=y instanceof Function?y(e.edges):y;v=Array.isArray(v)?v:[v];const _=Po(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),w=[];for(const z of _)w.push(ir(z));w.length&&e.hooks.edgesChange.trigger(w)},N=(y,v=!0,_=!1)=>{const w=y instanceof Function?y(e.nodes):y,z=Array.isArray(w)?w:[w],ne=[],J=[];function Q(de){const he=a(de);for(const $e of he)(!Se($e.deletable)||$e.deletable)&&J.push(sr($e.id,$e.source,$e.target,$e.sourceHandle,$e.targetHandle))}function ae(de){const he=[];for(const $e of e.nodes)$e.parentNode===de&&he.push($e);if(he.length){for(const $e of he)ne.push(rr($e.id));v&&Q(he);for(const $e of he)ae($e.id)}}for(const de of z){const he=typeof de=="string"?u(de):de;he&&(Se(he.deletable)&&!he.deletable||(ne.push(rr(he.id)),v&&Q([he]),_&&ae(he.id)))}J.length&&e.hooks.edgesChange.trigger(J),ne.length&&e.hooks.nodesChange.trigger(ne)},g=y=>{const v=y instanceof Function?y(e.edges):y,_=Array.isArray(v)?v:[v],w=[];for(const z of _){const ne=typeof z=="string"?c(z):z;ne&&(Se(ne.deletable)&&!ne.deletable||w.push(sr(typeof z=="string"?z:z.id,ne.source,ne.target,ne.sourceHandle,ne.targetHandle)))}e.hooks.edgesChange.trigger(w)},I=(y,v,_=!0)=>{const w=c(y.id);if(!w)return!1;const z=e.edges.indexOf(w),ne=Af(y,v,w,_,e.hooks.error.trigger);if(ne){const[J]=Po([ne],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((Q,ae)=>ae===z?J:Q),zo(e.connectionLookup,n.value,[J]),J}return!1},S=(y,v,_={replace:!1})=>{const w=c(y);if(!w)return;const z=typeof v=="function"?v(w):v;w.data=_.replace?z:{...w.data,...z}},D=y=>or(y,e.nodes),C=y=>{const v=or(y,e.edges);return zo(e.connectionLookup,n.value,v),v},P=(y,v,_={replace:!1})=>{const w=u(y);if(!w)return;const z=typeof v=="function"?v(w):v;_.replace?e.nodes.splice(e.nodes.indexOf(w),1,z):Object.assign(w,z)},W=(y,v,_={replace:!1})=>{const w=u(y);if(!w)return;const z=typeof v=="function"?v(w):v;w.data=_.replace?z:{...w.data,...z}},te=(y,v,_=!1)=>{_?e.connectionClickStartHandle=y:e.connectionStartHandle=y,e.connectionEndHandle=null,e.connectionStatus=null,v&&(e.connectionPosition=v)},B=(y,v=null,_=null)=>{e.connectionStartHandle&&(e.connectionPosition=y,e.connectionEndHandle=v,e.connectionStatus=_)},Y=(y,v)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,v?e.connectionClickStartHandle=null:e.connectionStartHandle=null},Z=y=>{const v=uf(y),_=v?null:Qt(y)?y:u(y.id);return!v&&!_?[null,null,v]:[v?y:jn(_),_,v]},re=(y,v=!0,_=e.nodes)=>{const[w,z,ne]=Z(y);if(!w)return[];const J=[];for(const Q of _||e.nodes){if(!ne&&(Q.id===z.id||!Q.computedPosition))continue;const ae=jn(Q),de=eo(ae,w);(v&&de>0||de>=Number(w.width)*Number(w.height))&&J.push(Q)}return J},le=(y,v,_=!0)=>{const[w]=Z(y);if(!w)return!1;const z=eo(w,v);return _&&z>0||z>=Number(w.width)*Number(w.height)},se=y=>{const{viewport:v,dimensions:_,d3Zoom:w,d3Selection:z,translateExtent:ne}=e;if(!w||!z||!y.x&&!y.y)return!1;const J=Ft.translate(v.x+y.x,v.y+y.y).scale(v.zoom),Q=[[0,0],[_.width,_.height]],ae=w.constrain()(J,Q,ne),de=e.viewport.x!==ae.x||e.viewport.y!==ae.y||e.viewport.zoom!==ae.k;return w.transform(z,ae),de},ge=y=>{const v=y instanceof Function?y(e):y,_=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Se(v.defaultEdgeOptions)&&(e.defaultEdgeOptions=v.defaultEdgeOptions);const w=v.modelValue||v.nodes||v.edges?[]:void 0;w&&(v.modelValue&&w.push(...v.modelValue),v.nodes&&w.push(...v.nodes),v.edges&&w.push(...v.edges),k(w));const z=()=>{Se(v.maxZoom)&&O(v.maxZoom),Se(v.minZoom)&&M(v.minZoom),Se(v.translateExtent)&&X(v.translateExtent)};for(const ne of Object.keys(v)){const J=ne,Q=v[J];![...Zf,..._].includes(J)&&Se(Q)&&(e[J]=Q)}Lo(()=>e.d3Zoom).not.toBeNull().then(z),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:h,setElements:k,setNodes:G,setEdges:F,addNodes:K,addEdges:f,removeNodes:N,removeEdges:g,findNode:u,findEdge:c,updateEdge:I,updateEdgeData:S,updateNode:P,updateNodeData:W,applyEdgeChanges:C,applyNodeChanges:D,addSelectedElements:$,addSelectedNodes:E,addSelectedEdges:x,setMinZoom:M,setMaxZoom:O,setTranslateExtent:X,setNodeExtent:R,setPaneClickDistance:V,removeSelectedElements:m,removeSelectedNodes:b,removeSelectedEdges:T,startConnection:te,updateConnection:B,endConnection:Y,setInteractive:ee,setState:ge,getIntersectingNodes:re,getIncomers:r,getOutgoers:s,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:le,panBy:se,fitView:y=>o.value.fitView(y),zoomIn:y=>o.value.zoomIn(y),zoomOut:y=>o.value.zoomOut(y),zoomTo:(y,v)=>o.value.zoomTo(y,v),setViewport:(y,v)=>o.value.setViewport(y,v),setTransform:(y,v)=>o.value.setTransform(y,v),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(y,v,_)=>o.value.setCenter(y,v,_),fitBounds:(y,v)=>o.value.fitBounds(y,v),project:y=>o.value.project(y),screenToFlowCoordinate:y=>o.value.screenToFlowCoordinate(y),flowToScreenCoordinate:y=>o.value.flowToScreenCoordinate(y),toObject:()=>{const y=[],v=[];for(const _ of e.nodes){const{computedPosition:w,handleBounds:z,selected:ne,dimensions:J,isParent:Q,resizing:ae,dragging:de,events:he,...$e}=_;y.push($e)}for(const _ of e.edges){const{selected:w,sourceNode:z,targetNode:ne,events:J,...Q}=_;v.push(Q)}return JSON.parse(JSON.stringify({nodes:y,edges:v,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:y=>new Promise(v=>{const{nodes:_,edges:w,position:z,zoom:ne,viewport:J}=y;if(_&&G(_),w&&F(w),J!=null&&J.x&&(J!=null&&J.y)||z){const Q=(J==null?void 0:J.x)||z[0],ae=(J==null?void 0:J.y)||z[1],de=(J==null?void 0:J.zoom)||ne||e.viewport.zoom;return Lo(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:Q,y:ae,zoom:de}).then(()=>{v(!0)})})}else v(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const y=Ls();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const v=Ft.translate(y.defaultViewport.x??0,y.defaultViewport.y??0).scale(Tt(y.defaultViewport.zoom??1,y.minZoom,y.maxZoom)),_=e.viewportRef.getBoundingClientRect(),w=[[0,0],[_.width,_.height]],z=e.d3Zoom.constrain()(v,w,y.translateExtent);e.d3Zoom.transform(e.d3Selection,z)}ge(y)},$destroy:()=>{}}}const qf=["data-id","data-handleid","data-nodeid","data-handlepos"],Jf={name:"Handle",compatConfig:{MODE:3}},pt=pe({...Jf,props:{id:{default:null},type:{},position:{default:()=>j.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Na(e,["position","connectable","connectableStart","connectableEnd","id"]),o=_e(()=>n.type??"source"),i=_e(()=>n.isValidConnection??null),{id:r,connectionStartHandle:s,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:h}=be(),{id:p,node:E,nodeEl:x,connectedEdges:$}=Hs(),b=ve(),T=_e(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),m=_e(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),M=_e(()=>{var F,k,K,f,N,g;return((F=s.value)==null?void 0:F.nodeId)===p&&((k=s.value)==null?void 0:k.id)===e.id&&((K=s.value)==null?void 0:K.type)===o.value||((f=l.value)==null?void 0:f.nodeId)===p&&((N=l.value)==null?void 0:N.id)===e.id&&((g=l.value)==null?void 0:g.type)===o.value}),O=_e(()=>{var F,k,K;return((F=a.value)==null?void 0:F.nodeId)===p&&((k=a.value)==null?void 0:k.id)===e.id&&((K=a.value)==null?void 0:K.type)===o.value}),{handlePointerDown:X,handleClick:R}=Vs({nodeId:p,handleId:e.id,isValidConnection:i,type:o}),V=oe(()=>typeof e.connectable=="string"&&e.connectable==="single"?!$.value.some(F=>{const k=F[`${o.value}Handle`];return F[o.value]!==p?!1:k?k===e.id:!0}):typeof e.connectable=="number"?$.value.filter(F=>{const k=F[`${o.value}Handle`];return F[o.value]!==p?!1:k?k===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(E,$.value):Se(e.connectable)?e.connectable:c.value);vt(()=>{var F;if(!E.dimensions.width||!E.dimensions.height)return;const k=(F=E.handleBounds[o.value])==null?void 0:F.find(D=>D.id===e.id);if(!u.value||k)return;const K=u.value.querySelector(".vue-flow__transformationpane");if(!x.value||!b.value||!K||!e.id)return;const f=x.value.getBoundingClientRect(),N=b.value.getBoundingClientRect(),g=window.getComputedStyle(K),{m22:I}=new window.DOMMatrixReadOnly(g.transform),S={id:e.id,position:e.position,x:(N.left-f.left)/I,y:(N.top-f.top)/I,type:o.value,nodeId:p,...go(b.value)};E.handleBounds[o.value]=[...E.handleBounds[o.value]??[],S]});function ee(F){const k=Ei(F);V.value&&T.value&&(k&&F.button===0||!k)&&X(F)}function G(F){!p||!a.value&&!T.value||V.value&&R(F)}return t({handleClick:R,handlePointerDown:X,onClick:G,onPointerDown:ee}),(F,k)=>(H(),q("div",{ref_key:"handle",ref:b,"data-id":`${L(r)}-${L(p)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":L(p),"data-handlepos":F.position,class:Ae(["vue-flow__handle",[`vue-flow__handle-${F.position}`,`vue-flow__handle-${e.id}`,L(d),L(h),o.value,{connectable:V.value,connecting:O.value,connectablestart:T.value,connectableend:m.value,connectionindicator:V.value&&(T.value&&!M.value||m.value&&M.value)}]]),onMousedown:ee,onTouchstartPassive:ee,onClick:G},[Ee(F.$slots,"default",{id:F.id})],42,qf))}}),wo=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:s}){const a=s.label??n;return[we(pt,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof a!="string"&&a?we(a):we(Ie,[a]),we(pt,{type:"source",position:e,connectable:o,isValidConnection:r})]};wo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];wo.inheritAttrs=!1;wo.compatConfig={MODE:3};const Qf=wo,_o=function({targetPosition:e=j.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const r=i.label??t;return[we(pt,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof r!="string"&&r?we(r):we(Ie,[r])]};_o.props=["targetPosition","label","isValidTargetPos","connectable","data"];_o.inheritAttrs=!1;_o.compatConfig={MODE:3};const jf=_o,bo=function({sourcePosition:e=j.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const r=i.label??t;return[typeof r!="string"&&r?we(r):we(Ie,[r]),we(pt,{type:"source",position:e,connectable:n,isValidConnection:o})]};bo.props=["sourcePosition","label","isValidSourcePos","connectable","data"];bo.inheritAttrs=!1;bo.compatConfig={MODE:3};const eh=bo,th=["transform"],nh=["width","height","x","y","rx","ry"],oh=["y"],ih={name:"EdgeText",compatConfig:{MODE:3}},rh=pe({...ih,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ve({x:0,y:0,width:0,height:0}),n=ve(null),o=oe(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);vt(i),me([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,s)=>(H(),q("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(H(),q("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:ze(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,nh)):ye("",!0),A("text",Gn(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[Ee(r.$slots,"default",{},()=>[typeof r.label!="string"?(H(),Ce(yt(r.label),{key:0})):(H(),q(Ie,{key:1},[mt(Me(r.label),1)],64))])],16,oh)],8,th))}}),sh=["id","d","marker-end","marker-start"],ah=["d","stroke-width"],lh={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},$o=pe({...lh,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ve(null),o=ve(null),i=ve(null),r=hi();return t({pathEl:n,interactionEl:o,labelEl:i}),(s,a)=>(H(),q(Ie,null,[A("path",Gn(L(r),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,sh),s.interactionWidth?(H(),q("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,ah)):ye("",!0),s.label&&s.labelX&&s.labelY?(H(),Ce(rh,{key:1,ref_key:"labelEl",ref:i,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ye("",!0)],64))}});function Ys({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[r,a,i,s]}function Xs({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+r*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function Cn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function vr({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let s,a;switch(e){case j.Left:s=t-Cn(t-o,r),a=n;break;case j.Right:s=t+Cn(o-t,r),a=n;break;case j.Top:s=t,a=n-Cn(n-i,r);break;case j.Bottom:s=t,a=n+Cn(i-n,r);break}return[s,a]}function Gs(e){const{sourceX:t,sourceY:n,sourcePosition:o=j.Bottom,targetX:i,targetY:r,targetPosition:s=j.Top,curvature:a=.25}=e,[l,u]=vr({pos:o,x1:t,y1:n,x2:i,y2:r,c:a}),[c,d]=vr({pos:s,x1:i,y1:r,x2:t,y2:n,c:a}),[h,p,E,x]=Xs({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${i},${r}`,h,p,E,x]}function mr({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,s;switch(e){case j.Left:case j.Right:r=.5*(t+o),s=n;break;case j.Top:case j.Bottom:r=t,s=.5*(n+i);break}return[r,s]}function Ws(e){const{sourceX:t,sourceY:n,sourcePosition:o=j.Bottom,targetX:i,targetY:r,targetPosition:s=j.Top}=e,[a,l]=mr({pos:o,x1:t,y1:n,x2:i,y2:r}),[u,c]=mr({pos:s,x1:i,y1:r,x2:t,y2:n}),[d,h,p,E]=Xs({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${i},${r}`,d,h,p,E]}const yr={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}};function uh({source:e,sourcePosition:t=j.Bottom,target:n}){return t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function wr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function ch({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:i,offset:r}){const s=yr[t],a=yr[o],l={x:e.x+s.x*r,y:e.y+s.y*r},u={x:n.x+a.x*r,y:n.y+a.y*r},c=uh({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",h=c[d];let p,E,x;const $={x:0,y:0},b={x:0,y:0},[T,m,M,O]=Ys({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){E=i.x??T,x=i.y??m;const R=[{x:E,y:l.y},{x:E,y:u.y}],V=[{x:l.x,y:x},{x:u.x,y:x}];s[d]===h?p=d==="x"?R:V:p=d==="x"?V:R}else{const R=[{x:l.x,y:u.y}],V=[{x:u.x,y:l.y}];if(d==="x"?p=s.x===h?V:R:p=s.y===h?R:V,t===o){const K=Math.abs(e[d]-n[d]);if(K<=r){const f=Math.min(r-1,r-K);s[d]===h?$[d]=(l[d]>e[d]?-1:1)*f:b[d]=(u[d]>n[d]?-1:1)*f}}if(t!==o){const K=d==="x"?"y":"x",f=s[d]===a[K],N=l[K]>u[K],g=l[K]<u[K];(s[d]===1&&(!f&&N||f&&g)||s[d]!==1&&(!f&&g||f&&N))&&(p=d==="x"?R:V)}const ee={x:l.x+$.x,y:l.y+$.y},G={x:u.x+b.x,y:u.y+b.y},F=Math.max(Math.abs(ee.x-p[0].x),Math.abs(G.x-p[0].x)),k=Math.max(Math.abs(ee.y-p[0].y),Math.abs(G.y-p[0].y));F>=k?(E=(ee.x+G.x)/2,x=p[0].y):(E=p[0].x,x=(ee.y+G.y)/2)}return[[e,{x:l.x+$.x,y:l.y+$.y},...p,{x:u.x+b.x,y:u.y+b.y},n],E,x,M,O]}function dh(e,t,n,o){const i=Math.min(wr(e,t)/2,wr(t,n)/2,o),{x:r,y:s}=t;if(e.x===r&&r===n.x||e.y===s&&s===n.y)return`L${r} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+i*u},${s}Q ${r},${s} ${r},${s+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${r},${s+i*l}Q ${r},${s} ${r+i*a},${s}`}function ni(e){const{sourceX:t,sourceY:n,sourcePosition:o=j.Bottom,targetX:i,targetY:r,targetPosition:s=j.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,h,p,E,x]=ch({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:s,center:{x:l,y:u},offset:c});return[d.reduce((b,T,m)=>{let M;return m>0&&m<d.length-1?M=dh(d[m-1],T,d[m+1],a):M=`${m===0?"M":"L"}${T.x} ${T.y}`,b+=M,b},""),h,p,E,x]}function fh(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,s,a,l]=Ys({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,s,a,l]}const hh=pe({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=fh(e);return we($o,{path:n,labelX:o,labelY:i,...t,...e})}}}),ph=hh,gh=pe({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ni({...e,sourcePosition:e.sourcePosition??j.Bottom,targetPosition:e.targetPosition??j.Top});return we($o,{path:n,labelX:o,labelY:i,...t,...e})}}}),Us=gh,vh=pe({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>we(Us,{...e,...t,borderRadius:0})}}),mh=vh,yh=pe({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Gs({...e,sourcePosition:e.sourcePosition??j.Bottom,targetPosition:e.targetPosition??j.Top});return we($o,{path:n,labelX:o,labelY:i,...t,...e})}}}),wh=yh,_h=pe({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ws({...e,sourcePosition:e.sourcePosition??j.Bottom,targetPosition:e.targetPosition??j.Top});return we($o,{path:n,labelX:o,labelY:i,...t,...e})}}}),bh=_h,$h={input:eh,default:Qf,output:jf},xh={default:wh,straight:ph,step:mh,smoothstep:Us,simplebezier:bh};function Eh(e,t,n){const o=oe(()=>x=>t.value.get(x)),i=oe(()=>x=>n.value.get(x)),r=oe(()=>{const x={...xh,...e.edgeTypes},$=Object.keys(x);for(const b of e.edges)b.type&&!$.includes(b.type)&&(x[b.type]=b.type);return x}),s=oe(()=>{const x={...$h,...e.nodeTypes},$=Object.keys(x);for(const b of e.nodes)b.type&&!$.includes(b.type)&&(x[b.type]=b.type);return x}),a=oe(()=>e.onlyRenderVisibleElements?Is(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=oe(()=>{if(e.onlyRenderVisibleElements){const x=[];for(const $ of e.edges){const b=t.value.get($.source),T=t.value.get($.target);_f({sourcePos:b.computedPosition||{x:0,y:0},targetPos:T.computedPosition||{x:0,y:0},sourceWidth:b.dimensions.width,sourceHeight:b.dimensions.height,targetWidth:T.dimensions.width,targetHeight:T.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&x.push($)}return x}return e.edges}),u=oe(()=>[...a.value,...l.value]),c=oe(()=>{const x=[];for(const $ of e.nodes)$.selected&&x.push($);return x}),d=oe(()=>{const x=[];for(const $ of e.edges)$.selected&&x.push($);return x}),h=oe(()=>[...c.value,...d.value]),p=oe(()=>{const x=[];for(const $ of e.nodes)$.dimensions.width&&$.dimensions.height&&$.handleBounds!==void 0&&x.push($);return x}),E=oe(()=>a.value.length>0&&p.value.length===a.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:r,getNodeTypes:s,getEdges:l,getNodes:a,getSelectedElements:h,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:p,areNodesInitialized:E}}class bt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=vn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??bt.instance;return bt.instance=o??new bt,n&&(n.config.globalProperties.$vueFlowStorage=bt.instance),bt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Ls(),i=ka(o),r={};for(const[h,p]of Object.entries(i.hooks)){const E=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;r[E]=p.on}const s={};for(const[h,p]of Object.entries(i.hooks))s[h]=p.trigger;const a=oe(()=>{const h=new Map;for(const p of i.nodes)h.set(p.id,p);return h}),l=oe(()=>{const h=new Map;for(const p of i.edges)h.set(p.id,p);return h}),u=Eh(i,a,l),c=Kf(i,a,l);c.setState({...i,...n});const d={...r,...u,...c,...ml(i),nodeLookup:a,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.45.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function be(e){const t=bt.getInstance(),n=Fr(),o=typeof e=="object",i=o?e:{id:e},r=i.id,s=r??(n==null?void 0:n.vueFlowId);let a;if(n){const l=At(gr,null);typeof l<"u"&&l!==null&&(!s||l.id===s)&&(a=l)}if(a||s&&(a=t.get(s)),!a||s&&a.id!==s){const l=r??t.getId(),u=t.create(l,i);a=u,(n??Vr(!0)).run(()=>{me(u.applyDefault,(d,h,p)=>{const E=$=>{u.applyNodeChanges($)},x=$=>{u.applyEdgeChanges($)};d?(u.onNodesChange(E),u.onEdgesChange(x)):(u.hooks.value.nodesChange.off(E),u.hooks.value.edgesChange.off(x)),p(()=>{u.hooks.value.nodesChange.off(E),u.hooks.value.edgesChange.off(x)})},{immediate:!0}),uo(()=>{if(a){const d=t.get(a.id);d?d.$destroy():mo(`No store instance found for id ${a.id} in storage.`)}})})}else o&&a.setState(i);if(n&&(Ct(gr,a),n.vueFlowId=a.id),o){const l=vn();(l==null?void 0:l.type.name)!=="VueFlow"&&a.emits.error(new ke(Ne.USEVUEFLOW_OPTIONS))}return a}function Sh(e){const{emits:t,dimensions:n}=be();let o;vt(()=>{const i=e.value,r=()=>{if(!i)return;const s=go(i);(s.width===0||s.height===0)&&t.error(new ke(Ne.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:s.width||500,height:s.height||500}};r(),window.addEventListener("resize",r),i&&(o=new ResizeObserver(()=>r()),o.observe(i)),Lr(()=>{window.removeEventListener("resize",r),o&&i&&o.unobserve(i)})})}const Nh={name:"UserSelection",compatConfig:{MODE:3}},kh=pe({...Nh,props:{userSelectionRect:{}},setup(e){return(t,n)=>(H(),q("div",{class:"vue-flow__selection vue-flow__container",style:ze({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Ch=["tabIndex"],Mh={name:"NodesSelection",compatConfig:{MODE:3}},Ih=pe({...Mh,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:s}=be(),a=Fs(),l=ve(null),u=Rs({el:l,onStart(E){t.selectionDragStart(E)},onDrag(E){t.selectionDrag(E)},onStop(E){t.selectionDragStop(E)}});vt(()=>{var E;r.value||(E=l.value)==null||E.focus({preventScroll:!0})});const c=oe(()=>$i(o.value)),d=oe(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function h(E){t.selectionContextMenu({event:E,nodes:o.value})}function p(E){r||Ot[E.key]&&(E.preventDefault(),a({x:Ot[E.key].x,y:Ot[E.key].y},E.shiftKey))}return(E,x)=>!L(s)&&c.value.width&&c.value.height?(H(),q("div",{key:0,class:Ae(["vue-flow__nodesselection vue-flow__container",L(i)]),style:ze({transform:`translate(${L(n).x}px,${L(n).y}px) scale(${L(n).zoom})`})},[A("div",{ref_key:"el",ref:l,class:Ae([{dragging:L(u)},"vue-flow__nodesselection-rect"]),style:ze(d.value),tabIndex:L(r)?void 0:-1,onContextmenu:h,onKeydown:p},null,46,Ch)],6)):ye("",!0)}});function Th(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Dh={name:"Pane",compatConfig:{MODE:3}},Ah=pe({...Dh,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:s,userSelectionRect:a,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:h,removeEdges:p,selectionMode:E,deleteKeyCode:x,multiSelectionKeyCode:$,multiSelectionActive:b,edgeLookup:T,nodeLookup:m,connectionLookup:M,defaultEdgeOptions:O,connectionStartHandle:X}=be(),R=ve(null),V=ve(new Set),ee=ve(new Set),G=ve(),F=_e(()=>l.value&&(e.isSelecting||r.value)),k=_e(()=>X.value!==null);let K=!1,f=!1;const N=rn(x,{actInsideInputWithModifier:!1}),g=rn($);me(N,B=>{B&&(h(d.value),p(c.value),u.value=!1)}),me(g,B=>{b.value=B});function I(B,Y){return Z=>{Z.target===Y&&(B==null||B(Z))}}function S(B){if(K||k.value){K=!1;return}i.paneClick(B),s(),u.value=!1}function D(B){B.preventDefault(),B.stopPropagation(),i.paneContextMenu(B)}function C(B){i.paneScroll(B)}function P(B){var Y,Z,re;if(G.value=(Y=t.value)==null?void 0:Y.getBoundingClientRect(),!l.value||!e.isSelecting||B.button!==0||B.target!==R.value||!G.value)return;(re=(Z=B.target)==null?void 0:Z.setPointerCapture)==null||re.call(Z,B.pointerId);const{x:le,y:se}=Th(B,G.value);f=!0,K=!1,s(),a.value={width:0,height:0,startX:le,startY:se,x:le,y:se},i.selectionStart(B)}function W(B){var Y;if(!G.value||!a.value)return;K=!0;const{x:Z,y:re}=We(B,G.value),{startX:le=0,startY:se=0}=a.value,ge={startX:le,startY:se,x:Z<le?Z:le,y:re<se?re:se,width:Math.abs(Z-le),height:Math.abs(re-se)},ie=V.value,ue=ee.value;V.value=new Set(Is(n.value,ge,o.value,E.value===bi.Partial,!0).map(y=>y.id)),ee.value=new Set;const ce=((Y=O.value)==null?void 0:Y.selectable)??!0;for(const y of V.value){const v=M.value.get(y);if(v)for(const{edgeId:_}of v.values()){const w=T.value.get(_);w&&(w.selectable??ce)&&ee.value.add(_)}}if(!pr(ie,V.value)){const y=ut(m.value,V.value,!0);i.nodesChange(y)}if(!pr(ue,ee.value)){const y=ut(T.value,ee.value);i.edgesChange(y)}a.value=ge,r.value=!0,u.value=!1}function te(B){var Y;B.button!==0||!f||((Y=B.target)==null||Y.releasePointerCapture(B.pointerId),!r.value&&a.value&&B.target===R.value&&S(B),r.value=!1,a.value=null,u.value=V.value.size>0,i.selectionEnd(B),e.selectionKeyPressed&&(K=!1),f=!1)}return(B,Y)=>(H(),q("div",{ref_key:"container",ref:R,class:Ae(["vue-flow__pane vue-flow__container",{selection:B.isSelecting}]),onClick:Y[0]||(Y[0]=Z=>F.value?void 0:I(S,R.value)(Z)),onContextmenu:Y[1]||(Y[1]=Z=>I(D,R.value)(Z)),onWheelPassive:Y[2]||(Y[2]=Z=>I(C,R.value)(Z)),onPointerenter:Y[3]||(Y[3]=Z=>F.value?void 0:L(i).paneMouseEnter(Z)),onPointerdown:Y[4]||(Y[4]=Z=>F.value?P(Z):L(i).paneMouseMove(Z)),onPointermove:Y[5]||(Y[5]=Z=>F.value?W(Z):L(i).paneMouseMove(Z)),onPointerup:Y[6]||(Y[6]=Z=>F.value?te(Z):void 0),onPointerleave:Y[7]||(Y[7]=Z=>L(i).paneMouseLeave(Z))},[Ee(B.$slots,"default"),L(r)&&L(a)?(H(),Ce(kh,{key:0,"user-selection-rect":L(a)},null,8,["user-selection-rect"])):ye("",!0),L(u)&&L(d).length?(H(),Ce(Ih,{key:1})):ye("",!0)],34))}}),zh={name:"Transform",compatConfig:{MODE:3}},Ph=pe({...zh,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=be(),i=oe(()=>n.value?!o.value:!1),r=oe(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(s,a)=>(H(),q("div",{class:"vue-flow__transformationpane vue-flow__container",style:ze({transform:r.value,opacity:i.value?0:void 0})},[Ee(s.$slots,"default")],4))}}),Bh={name:"Viewport",compatConfig:{MODE:3}},Oh=pe({...Bh,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:s,panActivationKeyCode:a,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:h,zoomOnPinch:p,zoomOnScroll:E,preventScrolling:x,noWheelClassName:$,noPanClassName:b,emits:T,connectionStartHandle:m,userSelectionActive:M,paneDragging:O,d3Zoom:X,d3Selection:R,d3ZoomHandler:V,viewport:ee,viewportRef:G,paneClickDistance:F}=be();Sh(G);const k=Xn(!1),K=Xn(!1);let f=null,N=!1,g=0,I={x:0,y:0,zoom:0};const S=rn(a),D=rn(s),C=rn(r),P=_e(()=>(!D.value||D.value&&s.value===!0)&&(S.value||d.value)),W=_e(()=>S.value||l.value),te=_e(()=>D.value||s.value===!0&&P.value!==!0);vt(()=>{if(!G.value){mo("Viewport element is missing");return}const se=G.value,ge=se.getBoundingClientRect(),ie=tf().clickDistance(F.value).scaleExtent([t.value,n.value]).translateExtent(i.value),ue=Oe(se).call(ie),ce=ue.on("wheel.zoom"),y=Ft.translate(o.value.x??0,o.value.y??0).scale(Tt(o.value.zoom??1,t.value,n.value)),v=[[0,0],[ge.width,ge.height]],_=ie.constrain()(y,v,i.value);ie.transform(ue,_),ie.wheelDelta(Y),X.value=ie,R.value=ue,V.value=ce,ee.value={x:_.x,y:_.y,zoom:_.k},ie.on("start",w=>{var z;if(!w.sourceEvent)return null;g=w.sourceEvent.button,k.value=!0;const ne=re(w.transform);((z=w.sourceEvent)==null?void 0:z.type)==="mousedown"&&(O.value=!0),I=ne,T.viewportChangeStart(ne),T.moveStart({event:w,flowTransform:ne})}),ie.on("end",w=>{if(!w.sourceEvent)return null;if(k.value=!1,O.value=!1,B(P.value,g??0)&&!N&&T.paneContextMenu(w.sourceEvent),N=!1,Z(I,w.transform)){const z=re(w.transform);I=z,T.viewportChangeEnd(z),T.moveEnd({event:w,flowTransform:z})}}),ie.filter(w=>{var z;const ne=C.value||E.value,J=p.value&&w.ctrlKey,Q=w.button;if(Q===1&&w.type==="mousedown"&&(le(w,"vue-flow__node")||le(w,"vue-flow__edge")))return!0;if(!P.value&&!ne&&!W.value&&!h.value&&!p.value||M.value||!h.value&&w.type==="dblclick"||le(w,$.value)&&w.type==="wheel"||le(w,b.value)&&(w.type!=="wheel"||W.value&&w.type==="wheel"&&!C.value)||!p.value&&w.ctrlKey&&w.type==="wheel"||!ne&&!W.value&&!J&&w.type==="wheel")return!1;if(!p&&w.type==="touchstart"&&((z=w.touches)==null?void 0:z.length)>1)return w.preventDefault(),!1;if(!P.value&&(w.type==="mousedown"||w.type==="touchstart")||s.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&Q===0||Array.isArray(d.value)&&!d.value.includes(Q)&&(w.type==="mousedown"||w.type==="touchstart"))return!1;const ae=Array.isArray(d.value)&&d.value.includes(Q)||s.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!Q||Q<=1;return(!w.ctrlKey||S.value||w.type==="wheel")&&ae}),me([M,P],()=>{M.value&&!k.value?ie.on("zoom",null):M.value||ie.on("zoom",w=>{ee.value={x:w.transform.x,y:w.transform.y,zoom:w.transform.k};const z=re(w.transform);N=B(P.value,g??0),T.viewportChange(z),T.move({event:w,flowTransform:z})})},{immediate:!0}),me([M,W,u,C,p,x,$],()=>{W.value&&!C.value&&!M.value?ue.on("wheel.zoom",w=>{if(le(w,$.value))return!1;const z=C.value||E.value,ne=p.value&&w.ctrlKey;if(!(!x.value||W.value||z||ne))return!1;w.preventDefault(),w.stopImmediatePropagation();const Q=ue.property("__zoom").k||1,ae=no();if(!S.value&&w.ctrlKey&&p.value&&ae){const Gt=Ye(w),xa=Y(w),Ea=Q*2**xa;ie.scaleTo(ue,Ea,Gt,w);return}const de=w.deltaMode===1?20:1;let he=u.value===on.Vertical?0:w.deltaX*de,$e=u.value===on.Horizontal?0:w.deltaY*de;!ae&&w.shiftKey&&u.value!==on.Vertical&&!he&&$e&&(he=$e,$e=0),ie.translateBy(ue,-(he/Q)*c.value,-($e/Q)*c.value);const Le=re(ue.property("__zoom"));f&&clearTimeout(f),K.value?(T.move({event:w,flowTransform:Le}),T.viewportChange(Le),f=setTimeout(()=>{T.moveEnd({event:w,flowTransform:Le}),T.viewportChangeEnd(Le),K.value=!1},150)):(K.value=!0,T.moveStart({event:w,flowTransform:Le}),T.viewportChangeStart(Le))},{passive:!1}):typeof ce<"u"&&ue.on("wheel.zoom",function(w,z){const ne=!x.value&&w.type==="wheel"&&!w.ctrlKey,J=C.value||E.value,Q=p.value&&w.ctrlKey;if(!J&&!l.value&&!Q&&w.type==="wheel"||ne||le(w,$.value))return null;w.preventDefault(),ce.call(this,w,z)},{passive:!1})},{immediate:!0})});function B(se,ge){return ge===2&&Array.isArray(se)&&se.includes(2)}function Y(se){const ge=se.ctrlKey&&no()?10:1;return-se.deltaY*(se.deltaMode===1?.05:se.deltaMode?1:.002)*ge}function Z(se,ge){return se.x!==ge.x&&!Number.isNaN(ge.x)||se.y!==ge.y&&!Number.isNaN(ge.y)||se.zoom!==ge.k&&!Number.isNaN(ge.k)}function re(se){return{x:se.x,y:se.y,zoom:se.k}}function le(se,ge){return se.target.closest(`.${ge}`)}return(se,ge)=>(H(),q("div",{ref_key:"viewportRef",ref:G,class:"vue-flow__viewport vue-flow__container"},[xe(Ah,{"is-selecting":te.value,"selection-key-pressed":L(D),class:Ae({connecting:!!L(m),dragging:L(O),draggable:L(d)===!0||Array.isArray(L(d))&&L(d).includes(0)})},{default:Ge(()=>[xe(Ph,null,{default:Ge(()=>[Ee(se.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Rh=["id"],Vh=["id"],Hh=["id"],Fh={name:"A11yDescriptions",compatConfig:{MODE:3}},Lh=pe({...Fh,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=be();return(i,r)=>(H(),q(Ie,null,[A("div",{id:`${L(bs)}-${L(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Me(L(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Rh),A("div",{id:`${L($s)}-${L(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Vh),L(n)?ye("",!0):(H(),q("div",{key:0,id:`${L(lf)}-${L(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Me(L(o)),9,Hh))],64))}});function Yh(){const e=be();me(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Xh(e,t,n){return n===j.Left?e-t:n===j.Right?e+t:e}function Gh(e,t,n){return n===j.Top?e-t:n===j.Bottom?e+t:e}const Si=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=j.Top,type:i}){return we("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Xh(t,e,o),cy:Gh(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Si.props=["radius","centerX","centerY","position","type"];Si.compatConfig={MODE:3};const _r=Si,Wh=pe({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:s,noPanClassName:a,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:h,multiSelectionActive:p,disableKeyboardA11y:E,elementsSelectable:x,edgesUpdatable:$,edgesFocusable:b,hooks:T}=be(),m=oe(()=>c(e.id)),{emit:M,on:O}=Of(m.value,r),X=At(yo),R=vn(),V=ve(!1),ee=ve(!1),G=ve(""),F=ve(null),k=ve("source"),K=ve(null),f=_e(()=>typeof m.value.selectable>"u"?x.value:m.value.selectable),N=_e(()=>typeof m.value.updatable>"u"?$.value:m.value.updatable),g=_e(()=>typeof m.value.focusable>"u"?b.value:m.value.focusable);Ct(zf,e.id),Ct(Pf,K);const I=oe(()=>m.value.class instanceof Function?m.value.class(m.value):m.value.class),S=oe(()=>m.value.style instanceof Function?m.value.style(m.value):m.value.style),D=oe(()=>{const v=m.value.type||"default",_=X==null?void 0:X[`edge-${v}`];if(_)return _;let w=m.value.template??l.value[v];if(typeof w=="string"&&R){const z=Object.keys(R.appContext.components);z&&z.includes(v)&&(w=Yr(v,!1))}return w&&typeof w!="string"?w:(r.error(new ke(Ne.EDGE_TYPE_MISSING,w)),!1)}),{handlePointerDown:C}=Vs({nodeId:G,handleId:F,type:k,isValidConnection:h,edgeUpdaterType:k,onEdgeUpdate:te,onEdgeUpdateEnd:B});return()=>{const v=d(m.value.source),_=d(m.value.target),w="pathOptions"in m.value?m.value.pathOptions:{};if(!v&&!_)return r.error(new ke(Ne.EDGE_SOURCE_TARGET_MISSING,m.value.id,m.value.source,m.value.target)),null;if(!v)return r.error(new ke(Ne.EDGE_SOURCE_MISSING,m.value.id,m.value.source)),null;if(!_)return r.error(new ke(Ne.EDGE_TARGET_MISSING,m.value.id,m.value.target)),null;if(!m.value||m.value.hidden||v.hidden||_.hidden)return null;let z;o.value===ft.Strict?z=v.handleBounds.source:z=[...v.handleBounds.source||[],...v.handleBounds.target||[]];const ne=lr(z,m.value.sourceHandle);let J;o.value===ft.Strict?J=_.handleBounds.target:J=[..._.handleBounds.target||[],..._.handleBounds.source||[]];const Q=lr(J,m.value.targetHandle),ae=(ne==null?void 0:ne.position)||j.Bottom,de=(Q==null?void 0:Q.position)||j.Top,{x:he,y:$e}=Lt(v,ne,ae),{x:Le,y:Gt}=Lt(_,Q,de);return m.value.sourceX=he,m.value.sourceY=$e,m.value.targetX=Le,m.value.targetY=Gt,we("g",{ref:K,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${D.value===!1?"default":m.value.type||"default"}`,a.value,I.value,{updating:V.value,selected:m.value.selected,animated:m.value.animated,inactive:!f.value&&!T.value.edgeClick.hasListeners()}],tabIndex:g.value?0:void 0,"aria-label":m.value.ariaLabel===null?void 0:m.value.ariaLabel??`Edge from ${m.value.source} to ${m.value.target}`,"aria-describedby":g.value?`${$s}-${t}`:void 0,"aria-roledescription":"edge",role:g.value?"group":"img",...m.value.domAttributes,onClick:Z,onContextmenu:re,onDblclick:le,onMouseenter:se,onMousemove:ge,onMouseleave:ie,onKeyDown:g.value?y:void 0},[ee.value?null:we(D.value===!1?l.value.default:D.value,{id:e.id,sourceNode:v,targetNode:_,source:m.value.source,target:m.value.target,type:m.value.type,updatable:N.value,selected:m.value.selected,animated:m.value.animated,label:m.value.label,labelStyle:m.value.labelStyle,labelShowBg:m.value.labelShowBg,labelBgStyle:m.value.labelBgStyle,labelBgPadding:m.value.labelBgPadding,labelBgBorderRadius:m.value.labelBgBorderRadius,data:m.value.data,events:{...m.value.events,...O},style:S.value,markerStart:`url('#${dn(m.value.markerStart,t)}')`,markerEnd:`url('#${dn(m.value.markerEnd,t)}')`,sourcePosition:ae,targetPosition:de,sourceX:he,sourceY:$e,targetX:Le,targetY:Gt,sourceHandleId:m.value.sourceHandle,targetHandleId:m.value.targetHandle,interactionWidth:m.value.interactionWidth,...w}),[N.value==="source"||N.value===!0?[we("g",{onMousedown:ue,onMouseenter:P,onMouseout:W},we(_r,{position:ae,centerX:he,centerY:$e,radius:i.value,type:"source","data-type":"source"}))]:null,N.value==="target"||N.value===!0?[we("g",{onMousedown:ce,onMouseenter:P,onMouseout:W},we(_r,{position:de,centerX:Le,centerY:Gt,radius:i.value,type:"target","data-type":"target"}))]:null]])};function P(){V.value=!0}function W(){V.value=!1}function te(v,_){M.update({event:v,edge:m.value,connection:_})}function B(v){M.updateEnd({event:v,edge:m.value}),ee.value=!1}function Y(v,_){v.button===0&&(ee.value=!0,G.value=_?m.value.target:m.value.source,F.value=(_?m.value.targetHandle:m.value.sourceHandle)??null,k.value=_?"target":"source",M.updateStart({event:v,edge:m.value}),C(v))}function Z(v){var _;const w={event:v,edge:m.value};f.value&&(s.value=!1,m.value.selected&&p.value?(u([m.value]),(_=K.value)==null||_.blur()):n([m.value])),M.click(w)}function re(v){M.contextMenu({event:v,edge:m.value})}function le(v){M.doubleClick({event:v,edge:m.value})}function se(v){M.mouseEnter({event:v,edge:m.value})}function ge(v){M.mouseMove({event:v,edge:m.value})}function ie(v){M.mouseLeave({event:v,edge:m.value})}function ue(v){Y(v,!0)}function ce(v){Y(v,!1)}function y(v){var _;!E.value&&xs.includes(v.key)&&f.value&&(v.key==="Escape"?((_=K.value)==null||_.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Uh=Wh,Zh=pe({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:s,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=be(),h=(e=At(yo))==null?void 0:e["connection-line"],p=oe(()=>{var T;return d((T=o.value)==null?void 0:T.nodeId)}),E=oe(()=>{var T;return d((T=i.value)==null?void 0:T.nodeId)??null}),x=oe(()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom})),$=oe(()=>l.value.markerStart?`url(#${dn(l.value.markerStart,t)})`:""),b=oe(()=>l.value.markerEnd?`url(#${dn(l.value.markerEnd,t)})`:"");return()=>{var T,m,M;if(!p.value||!o.value)return null;const O=o.value.id,X=o.value.type,R=p.value.handleBounds;let V=(R==null?void 0:R[X])??[];if(n.value===ft.Loose){const S=(R==null?void 0:R[X==="source"?"target":"source"])??[];V=[...V,...S]}if(!V)return null;const ee=(O?V.find(S=>S.id===O):V[0])??null,G=(ee==null?void 0:ee.position)??j.Top,{x:F,y:k}=Lt(p.value,ee,G);let K=null;E.value&&(n.value===ft.Strict?K=((T=E.value.handleBounds[X==="source"?"target":"source"])==null?void 0:T.find(S=>{var D;return S.id===((D=i.value)==null?void 0:D.id)}))||null:K=((m=[...E.value.handleBounds.source??[],...E.value.handleBounds.target??[]])==null?void 0:m.find(S=>{var D;return S.id===((D=i.value)==null?void 0:D.id)}))||null);const f=((M=i.value)==null?void 0:M.position)??(G?ei[G]:null);if(!G||!f)return null;const N=s.value??l.value.type??wt.Bezier;let g="";const I={sourceX:F,sourceY:k,sourcePosition:G,targetX:x.value.x,targetY:x.value.y,targetPosition:f};return N===wt.Bezier?[g]=Gs(I):N===wt.Step?[g]=ni({...I,borderRadius:0}):N===wt.SmoothStep?[g]=ni(I):N===wt.SimpleBezier?[g]=Ws(I):g=`M${F},${k} ${x.value.x},${x.value.y}`,we("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},we("g",{class:"vue-flow__connection"},h?we(h,{sourceX:F,sourceY:k,sourcePosition:G,targetX:x.value.x,targetY:x.value.y,targetPosition:f,sourceNode:p.value,sourceHandle:ee,targetNode:E.value,targetHandle:K,markerEnd:b.value,markerStart:$.value,connectionStatus:u.value}):we("path",{d:g,class:[l.value.class,u,"vue-flow__connection-path"],style:{...a.value,...l.value.style},"marker-end":b.value,"marker-start":$.value})))}}}),Kh=Zh,qh=["id","markerWidth","markerHeight","markerUnits","orient"],Jh={name:"MarkerType",compatConfig:{MODE:3}},Qh=pe({...Jh,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(H(),q("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===L(Jo).ArrowClosed?(H(),q("polyline",{key:0,style:ze({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ye("",!0),t.type===L(Jo).Arrow?(H(),q("polyline",{key:1,style:ze({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ye("",!0)],8,qh))}}),jh={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},ep={name:"MarkerDefinitions",compatConfig:{MODE:3}},tp=pe({...ep,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=be(),r=oe(()=>{const s=new Set,a=[],l=u=>{if(u){const c=dn(u,t);s.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||i.value}):a.push({id:c,color:i.value,type:u}),s.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(s,a)=>(H(),q("svg",jh,[A("defs",null,[(H(!0),q(Ie,null,kt(r.value,l=>(H(),Ce(Qh,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),np={name:"Edges",compatConfig:{MODE:3}},op=pe({...np,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=be();return(i,r)=>(H(),q(Ie,null,[xe(tp),(H(!0),q(Ie,null,kt(L(n),s=>(H(),q("svg",{key:s.id,class:"vue-flow__edges vue-flow__container",style:ze({zIndex:L(bf)(s,L(t),L(o))})},[xe(L(Uh),{id:s.id},null,8,["id"])],4))),128)),xe(L(Kh))],64))}}),ip=pe({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:s,removeSelectedNodes:a,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:h,elevateNodesOnSelect:p,disableKeyboardA11y:E,ariaLiveMessage:x,snapToGrid:$,snapGrid:b,nodeDragThreshold:T,nodesDraggable:m,elementsSelectable:M,nodesConnectable:O,nodesFocusable:X,hooks:R}=be(),V=ve(null);Ct(Os,V),Ct(Bs,e.id);const ee=At(yo),G=vn(),F=Fs(),{node:k,parentNode:K}=Hs(e.id),{emit:f,on:N}=Ff(k,s),g=_e(()=>typeof k.draggable>"u"?m.value:k.draggable),I=_e(()=>typeof k.selectable>"u"?M.value:k.selectable),S=_e(()=>typeof k.connectable>"u"?O.value:k.connectable),D=_e(()=>typeof k.focusable>"u"?X.value:k.focusable),C=oe(()=>I.value||g.value||R.value.nodeClick.hasListeners()||R.value.nodeDoubleClick.hasListeners()||R.value.nodeMouseEnter.hasListeners()||R.value.nodeMouseMove.hasListeners()||R.value.nodeMouseLeave.hasListeners()),P=_e(()=>!!k.dimensions.width&&!!k.dimensions.height),W=oe(()=>{const _=k.type||"default",w=ee==null?void 0:ee[`node-${_}`];if(w)return w;let z=k.template||d.value[_];if(typeof z=="string"&&G){const ne=Object.keys(G.appContext.components);ne&&ne.includes(_)&&(z=Yr(_,!1))}return z&&typeof z!="string"?z:(s.error(new ke(Ne.NODE_TYPE_MISSING,z)),!1)}),te=Rs({id:e.id,el:V,disabled:()=>!g.value,selectable:I,dragHandle:()=>k.dragHandle,onStart(_){f.dragStart(_)},onDrag(_){f.drag(_)},onStop(_){f.dragStop(_)},onClick(_){y(_)}}),B=oe(()=>k.class instanceof Function?k.class(k):k.class),Y=oe(()=>{const _=(k.style instanceof Function?k.style(k):k.style)||{},w=k.width instanceof Function?k.width(k):k.width,z=k.height instanceof Function?k.height(k):k.height;return!_.width&&w&&(_.width=typeof w=="string"?w:`${w}px`),!_.height&&z&&(_.height=typeof z=="string"?z:`${z}px`),_}),Z=_e(()=>Number(k.zIndex??Y.value.zIndex??0));return c(_=>{(_.includes(e.id)||!_.length)&&le()}),vt(()=>{me(()=>k.hidden,(_=!1,w,z)=>{!_&&V.value&&(e.resizeObserver.observe(V.value),z(()=>{V.value&&e.resizeObserver.unobserve(V.value)}))},{immediate:!0,flush:"post"})}),me([()=>k.type,()=>k.sourcePosition,()=>k.targetPosition],()=>{ot(()=>{u([{id:e.id,nodeElement:V.value,forceUpdate:!0}])})}),me([()=>k.position.x,()=>k.position.y,()=>{var _;return(_=K.value)==null?void 0:_.computedPosition.x},()=>{var _;return(_=K.value)==null?void 0:_.computedPosition.y},()=>{var _;return(_=K.value)==null?void 0:_.computedPosition.z},Z,()=>k.selected,()=>k.dimensions.height,()=>k.dimensions.width,()=>{var _;return(_=K.value)==null?void 0:_.dimensions.height},()=>{var _;return(_=K.value)==null?void 0:_.dimensions.width}],([_,w,z,ne,J,Q])=>{const ae={x:_,y:w,z:Q+(p.value&&k.selected?1e3:0)};typeof z<"u"&&typeof ne<"u"?k.computedPosition=gf({x:z,y:ne,z:J},ae):k.computedPosition=ae},{flush:"post",immediate:!0}),me([()=>k.extent,h],([_,w],[z,ne])=>{(_!==z||w!==ne)&&re()}),k.extent==="parent"||typeof k.extent=="object"&&"range"in k.extent&&k.extent.range==="parent"?Lo(()=>P).toBe(!0).then(re):re(),()=>k.hidden?null:we("div",{ref:V,"data-id":k.id,class:["vue-flow__node",`vue-flow__node-${W.value===!1?"default":k.type||"default"}`,{[n.value]:g.value,dragging:te==null?void 0:te.value,draggable:g.value,selected:k.selected,selectable:I.value,parent:k.isParent},B.value],style:{visibility:P.value?"visible":"hidden",zIndex:k.computedPosition.z??Z.value,transform:`translate(${k.computedPosition.x}px,${k.computedPosition.y}px)`,pointerEvents:C.value?"all":"none",...Y.value},tabIndex:D.value?0:void 0,role:D.value?"group":void 0,"aria-describedby":E.value?void 0:`${bs}-${t}`,"aria-label":k.ariaLabel,"aria-roledescription":"node",...k.domAttributes,onMouseenter:se,onMousemove:ge,onMouseleave:ie,onContextmenu:ue,onClick:y,onDblclick:ce,onKeydown:v},[we(W.value===!1?d.value.default:W.value,{id:k.id,type:k.type,data:k.data,events:{...k.events,...N},selected:k.selected,resizing:k.resizing,dragging:te.value,connectable:S.value,position:k.computedPosition,dimensions:k.dimensions,isValidTargetPos:k.isValidTargetPos,isValidSourcePos:k.isValidSourcePos,parent:k.parentNode,parentNodeId:k.parentNode,zIndex:k.computedPosition.z??Z.value,targetPosition:k.targetPosition,sourcePosition:k.sourcePosition,label:k.label,dragHandle:k.dragHandle,onUpdateNodeInternals:le})]);function re(){const _=k.computedPosition,{computedPosition:w,position:z}=xi(k,$.value?vo(_,b.value):_,s.error,h.value,K.value);(k.computedPosition.x!==w.x||k.computedPosition.y!==w.y)&&(k.computedPosition={...k.computedPosition,...w}),(k.position.x!==z.x||k.position.y!==z.y)&&(k.position=z)}function le(){V.value&&u([{id:e.id,nodeElement:V.value,forceUpdate:!0}])}function se(_){te!=null&&te.value||f.mouseEnter({event:_,node:k})}function ge(_){te!=null&&te.value||f.mouseMove({event:_,node:k})}function ie(_){te!=null&&te.value||f.mouseLeave({event:_,node:k})}function ue(_){return f.contextMenu({event:_,node:k})}function ce(_){return f.doubleClick({event:_,node:k})}function y(_){I.value&&(!o.value||!g.value||T.value>0)&&ti(k,r.value,l,a,i,!1,V.value),f.click({event:_,node:k})}function v(_){if(!(Qo(_)||E.value))if(xs.includes(_.key)&&I.value){const w=_.key==="Escape";ti(k,r.value,l,a,i,w,V.value)}else g.value&&k.selected&&Ot[_.key]&&(_.preventDefault(),x.value=`Moved selected node ${_.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~k.position.x}, y: ${~~k.position.y}`,F({x:Ot[_.key].x,y:Ot[_.key].y},_.shiftKey))}}}),rp=ip;function sp(e={includeHiddenNodes:!1}){const{nodes:t}=be();return oe(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const ap={class:"vue-flow__nodes vue-flow__container"},lp={name:"Nodes",compatConfig:{MODE:3}},up=pe({...lp,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=be(),i=sp(),r=ve();return me(i,s=>{s&&ot(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),vt(()=>{r.value=new ResizeObserver(s=>{const a=s.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));ot(()=>n(a))})}),Lr(()=>{var s;return(s=r.value)==null?void 0:s.disconnect()}),(s,a)=>(H(),q("div",ap,[r.value?(H(!0),q(Ie,{key:0},kt(L(t),(l,u,c,d)=>{const h=[l.id];if(d&&d.key===l.id&&Da(d,h))return d;const p=(H(),Ce(L(rp),{id:l.id,key:l.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return p.memo=h,p},a,0),128)):ye("",!0)]))}});function cp(){const{emits:e}=be();vt(()=>{if(Ps()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new ke(Ne.MISSING_STYLES))}})}const dp=A("div",{class:"vue-flow__edge-labels"},null,-1),fp={name:"VueFlow",compatConfig:{MODE:3}},hp=pe({...fp,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Hr(),r=No(o,"modelValue",n),s=No(o,"nodes",n),a=No(o,"edges",n),l=be(o),u=Gf({modelValue:r,nodes:s,edges:a},o,l);return Uf(n,l.hooks),Yh(),cp(),Ct(yo,i),Sa(()=>{u()}),t(l),(c,d)=>(H(),q("div",{ref:L(l).vueFlowRef,class:"vue-flow"},[xe(Oh,null,{default:Ge(()=>[xe(op),dp,xe(up),Ee(c.$slots,"zoom-pane")]),_:3}),Ee(c.$slots,"default"),xe(Lh)],512))}}),pp={name:"Panel",compatConfig:{MODE:3}},Zs=pe({...pp,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=be(),o=oe(()=>`${t.position}`.split("-"));return(i,r)=>(H(),q("div",{class:Ae(["vue-flow__panel",o.value]),style:ze({pointerEvents:L(n)?"none":"all"})},[Ee(i.$slots,"default")],6))}}),gp={name:"ControlButton",compatConfig:{MODE:3}},vp=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},mp={class:"vue-flow__controls-button"};function yp(e,t,n,o,i,r){return H(),q("button",mp,[Ee(e.$slots,"default")])}const Mn=vp(gp,[["render",yp]]),wp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_p=A("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),bp=[_p];function $p(e,t){return H(),q("svg",wp,bp)}const xp={render:$p},Ep={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Sp=A("path",{d:"M0 0h32v4.2H0z"},null,-1),Np=[Sp];function kp(e,t){return H(),q("svg",Ep,Np)}const Cp={render:kp},Mp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Ip=A("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Tp=[Ip];function Dp(e,t){return H(),q("svg",Mp,Tp)}const Ap={render:Dp},zp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Pp=A("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Bp=[Pp];function Op(e,t){return H(),q("svg",zp,Bp)}const Rp={render:Op},Vp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Hp=A("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Fp=[Hp];function Lp(e,t){return H(),q("svg",Vp,Fp)}const Yp={render:Lp},Xp={name:"Controls",compatConfig:{MODE:3}},Gp=pe({...Xp,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>_s.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:i,setInteractive:r,zoomIn:s,zoomOut:a,fitView:l,viewport:u,minZoom:c,maxZoom:d}=be(),h=_e(()=>n.value||o.value||i.value),p=_e(()=>u.value.zoom<=c.value),E=_e(()=>u.value.zoom>=d.value);function x(){s(),t("zoomIn")}function $(){a(),t("zoomOut")}function b(){l(e.fitViewParams),t("fitView")}function T(){r(!h.value),t("interactionChange",!h.value)}return(m,M)=>(H(),Ce(L(Zs),{class:"vue-flow__controls",position:m.position},{default:Ge(()=>[Ee(m.$slots,"top"),m.showZoom?(H(),q(Ie,{key:0},[Ee(m.$slots,"control-zoom-in",{},()=>[xe(Mn,{class:"vue-flow__controls-zoomin",disabled:E.value,onClick:x},{default:Ge(()=>[Ee(m.$slots,"icon-zoom-in",{},()=>[(H(),Ce(yt(L(xp))))])]),_:3},8,["disabled"])]),Ee(m.$slots,"control-zoom-out",{},()=>[xe(Mn,{class:"vue-flow__controls-zoomout",disabled:p.value,onClick:$},{default:Ge(()=>[Ee(m.$slots,"icon-zoom-out",{},()=>[(H(),Ce(yt(L(Cp))))])]),_:3},8,["disabled"])])],64)):ye("",!0),m.showFitView?Ee(m.$slots,"control-fit-view",{key:1},()=>[xe(Mn,{class:"vue-flow__controls-fitview",onClick:b},{default:Ge(()=>[Ee(m.$slots,"icon-fit-view",{},()=>[(H(),Ce(yt(L(Ap))))])]),_:3})]):ye("",!0),m.showInteractive?Ee(m.$slots,"control-interactive",{key:2},()=>[m.showInteractive?(H(),Ce(Mn,{key:0,class:"vue-flow__controls-interactive",onClick:T},{default:Ge(()=>[h.value?Ee(m.$slots,"icon-unlock",{key:0},()=>[(H(),Ce(yt(L(Yp))))]):ye("",!0),h.value?ye("",!0):Ee(m.$slots,"icon-lock",{key:1},()=>[(H(),Ce(yt(L(Rp))))])]),_:3})):ye("",!0)]):ye("",!0),Ee(m.$slots,"default")]),_:3},8,["position"]))}});var Wp={value:()=>{}};function Ni(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Hn(n)}function Hn(e){this._=e}function Up(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Hn.prototype=Ni.prototype={constructor:Hn,on:function(e,t){var n=this._,o=Up(e+"",n),i,r=-1,s=o.length;if(arguments.length<2){for(;++r<s;)if((i=(e=o[r]).type)&&(i=Zp(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(i=(e=o[r]).type)n[i]=br(n[i],e.name,t);else if(t==null)for(i in n)n[i]=br(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Hn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Zp(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function br(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Wp,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var oi="http://www.w3.org/1999/xhtml";const $r={svg:"http://www.w3.org/2000/svg",xhtml:oi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$r.hasOwnProperty(t)?{space:$r[t],local:e}:e}function Kp(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===oi&&t.documentElement.namespaceURI===oi?t.createElement(e):t.createElementNS(n,e)}}function qp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ks(e){var t=xo(e);return(t.local?qp:Kp)(t)}function Jp(){}function ki(e){return e==null?Jp:function(){return this.querySelector(e)}}function Qp(e){typeof e!="function"&&(e=ki(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,a=o[i]=new Array(s),l,u,c=0;c<s;++c)(l=r[c])&&(u=e.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Be(o,this._parents)}function jp(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function eg(){return[]}function qs(e){return e==null?eg:function(){return this.querySelectorAll(e)}}function tg(e){return function(){return jp(e.apply(this,arguments))}}function ng(e){typeof e=="function"?e=tg(e):e=qs(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var s=t[r],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),i.push(l));return new Be(o,i)}function Js(e){return function(){return this.matches(e)}}function Qs(e){return function(t){return t.matches(e)}}var og=Array.prototype.find;function ig(e){return function(){return og.call(this.children,e)}}function rg(){return this.firstElementChild}function sg(e){return this.select(e==null?rg:ig(typeof e=="function"?e:Qs(e)))}var ag=Array.prototype.filter;function lg(){return Array.from(this.children)}function ug(e){return function(){return ag.call(this.children,e)}}function cg(e){return this.selectAll(e==null?lg:ug(typeof e=="function"?e:Qs(e)))}function dg(e){typeof e!="function"&&(e=Js(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,a=o[i]=[],l,u=0;u<s;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&a.push(l);return new Be(o,this._parents)}function js(e){return new Array(e.length)}function fg(){return new Be(this._enter||this._groups.map(js),this._parents)}function oo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}oo.prototype={constructor:oo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hg(e){return function(){return e}}function pg(e,t,n,o,i,r){for(var s=0,a,l=t.length,u=r.length;s<u;++s)(a=t[s])?(a.__data__=r[s],o[s]=a):n[s]=new oo(e,r[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function gg(e,t,n,o,i,r,s){var a,l,u=new Map,c=t.length,d=r.length,h=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(h[a]=p=s.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<d;++a)p=s.call(e,r[a],a,r)+"",(l=u.get(p))?(o[a]=l,l.__data__=r[a],u.delete(p)):n[a]=new oo(e,r[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function vg(e){return e.__data__}function mg(e,t){if(!arguments.length)return Array.from(this,vg);var n=t?gg:pg,o=this._parents,i=this._groups;typeof e!="function"&&(e=hg(e));for(var r=i.length,s=new Array(r),a=new Array(r),l=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],h=d.length,p=yg(e.call(c,c&&c.__data__,u,o)),E=p.length,x=a[u]=new Array(E),$=s[u]=new Array(E),b=l[u]=new Array(h);n(c,d,x,$,b,p,t);for(var T=0,m=0,M,O;T<E;++T)if(M=x[T]){for(T>=m&&(m=T+1);!(O=$[m])&&++m<E;);M._next=O||null}}return s=new Be(s,o),s._enter=a,s._exit=l,s}function yg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wg(){return new Be(this._exit||this._groups.map(js),this._parents)}function _g(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function bg(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,s=Math.min(i,r),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=o[l],d=u.length,h=a[l]=new Array(d),p,E=0;E<d;++E)(p=u[E]||c[E])&&(h[E]=p);for(;l<i;++l)a[l]=n[l];return new Be(a,this._parents)}function $g(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],s;--i>=0;)(s=o[i])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function xg(e){e||(e=Eg);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var s=n[r],a=s.length,l=i[r]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Be(i,this._parents).order()}function Eg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Sg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ng(){return Array.from(this)}function kg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var s=o[i];if(s)return s}return null}function Cg(){let e=0;for(const t of this)++e;return e}function Mg(){return!this.node()}function Ig(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,s=i.length,a;r<s;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function Tg(e){return function(){this.removeAttribute(e)}}function Dg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ag(e,t){return function(){this.setAttribute(e,t)}}function zg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Bg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Og(e,t){var n=xo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Dg:Tg:typeof t=="function"?n.local?Bg:Pg:n.local?zg:Ag)(n,t))}function ea(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rg(e){return function(){this.style.removeProperty(e)}}function Vg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hg(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Fg(e,t,n){return arguments.length>1?this.each((t==null?Rg:typeof t=="function"?Hg:Vg)(e,t,n??"")):Yt(this.node(),e)}function Yt(e,t){return e.style.getPropertyValue(t)||ea(e).getComputedStyle(e,null).getPropertyValue(t)}function Lg(e){return function(){delete this[e]}}function Yg(e,t){return function(){this[e]=t}}function Xg(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Gg(e,t){return arguments.length>1?this.each((t==null?Lg:typeof t=="function"?Xg:Yg)(e,t)):this.node()[e]}function ta(e){return e.trim().split(/^|\s+/)}function Ci(e){return e.classList||new na(e)}function na(e){this._node=e,this._names=ta(e.getAttribute("class")||"")}na.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function oa(e,t){for(var n=Ci(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function ia(e,t){for(var n=Ci(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Wg(e){return function(){oa(this,e)}}function Ug(e){return function(){ia(this,e)}}function Zg(e,t){return function(){(t.apply(this,arguments)?oa:ia)(this,e)}}function Kg(e,t){var n=ta(e+"");if(arguments.length<2){for(var o=Ci(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Zg:t?Wg:Ug)(n,t))}function qg(){this.textContent=""}function Jg(e){return function(){this.textContent=e}}function Qg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jg(e){return arguments.length?this.each(e==null?qg:(typeof e=="function"?Qg:Jg)(e)):this.node().textContent}function ev(){this.innerHTML=""}function tv(e){return function(){this.innerHTML=e}}function nv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ov(e){return arguments.length?this.each(e==null?ev:(typeof e=="function"?nv:tv)(e)):this.node().innerHTML}function iv(){this.nextSibling&&this.parentNode.appendChild(this)}function rv(){return this.each(iv)}function sv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function av(){return this.each(sv)}function lv(e){var t=typeof e=="function"?e:Ks(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uv(){return null}function cv(e,t){var n=typeof e=="function"?e:Ks(e),o=t==null?uv:typeof t=="function"?t:ki(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function dv(){var e=this.parentNode;e&&e.removeChild(this)}function fv(){return this.each(dv)}function hv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gv(e){return this.select(e?pv:hv)}function vv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mv(e){return function(t){e.call(this,t,this.__data__)}}function yv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function wv(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function _v(e,t,n){return function(){var o=this.__on,i,r=mv(t);if(o){for(var s=0,a=o.length;s<a;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function bv(e,t,n){var o=yv(e+""),i,r=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<r;++i)if((s=o[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?_v:wv,i=0;i<r;++i)this.each(a(o[i],t,n));return this}function ra(e,t,n){var o=ea(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function $v(e,t){return function(){return ra(this,e,t)}}function xv(e,t){return function(){return ra(this,e,t.apply(this,arguments))}}function Ev(e,t){return this.each((typeof t=="function"?xv:$v)(e,t))}function*Sv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,s;i<r;++i)(s=o[i])&&(yield s)}var sa=[null];function Be(e,t){this._groups=e,this._parents=t}function wn(){return new Be([[document.documentElement]],sa)}function Nv(){return this}Be.prototype=wn.prototype={constructor:Be,select:Qp,selectAll:ng,selectChild:sg,selectChildren:cg,filter:dg,data:mg,enter:fg,exit:wg,join:_g,merge:bg,selection:Nv,order:$g,sort:xg,call:Sg,nodes:Ng,node:kg,size:Cg,empty:Mg,each:Ig,attr:Og,style:Fg,property:Gg,classed:Kg,text:jg,html:ov,raise:rv,lower:av,append:lv,insert:cv,remove:fv,clone:gv,datum:vv,on:bv,dispatch:Ev,[Symbol.iterator]:Sv};function dt(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],sa)}function kv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lt(e,t){if(e=kv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const ii={capture:!0,passive:!1};function ri(e){e.preventDefault(),e.stopImmediatePropagation()}function Cv(e){var t=e.document.documentElement,n=dt(e).on("dragstart.drag",ri,ii);"onselectstart"in t?n.on("selectstart.drag",ri,ii):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Mv(e,t){var n=e.document.documentElement,o=dt(e).on("dragstart.drag",null);t&&(o.on("click.drag",ri,ii),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Mi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function aa(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function _n(){}var fn=.7,io=1/fn,Rt="\\s*([+-]?\\d+)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iv=/^#([0-9a-f]{3,8})$/,Tv=new RegExp(`^rgb\\(${Rt},${Rt},${Rt}\\)$`),Dv=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),Av=new RegExp(`^rgba\\(${Rt},${Rt},${Rt},${hn}\\)$`),zv=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${hn}\\)$`),Pv=new RegExp(`^hsl\\(${hn},${Ze},${Ze}\\)$`),Bv=new RegExp(`^hsla\\(${hn},${Ze},${Ze},${hn}\\)$`),xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mi(_n,pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Er,formatHex:Er,formatHex8:Ov,formatHsl:Rv,formatRgb:Sr,toString:Sr});function Er(){return this.rgb().formatHex()}function Ov(){return this.rgb().formatHex8()}function Rv(){return la(this).formatHsl()}function Sr(){return this.rgb().formatRgb()}function pn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Iv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Nr(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?In(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?In(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tv.exec(e))?new De(t[1],t[2],t[3],1):(t=Dv.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Av.exec(e))?In(t[1],t[2],t[3],t[4]):(t=zv.exec(e))?In(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pv.exec(e))?Mr(t[1],t[2]/100,t[3]/100,1):(t=Bv.exec(e))?Mr(t[1],t[2]/100,t[3]/100,t[4]):xr.hasOwnProperty(e)?Nr(xr[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function Nr(e){return new De(e>>16&255,e>>8&255,e&255,1)}function In(e,t,n,o){return o<=0&&(e=t=n=NaN),new De(e,t,n,o)}function Vv(e){return e instanceof _n||(e=pn(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function si(e,t,n,o){return arguments.length===1?Vv(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Mi(De,si,aa(_n,{brighter(e){return e=e==null?io:Math.pow(io,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(Nt(this.r),Nt(this.g),Nt(this.b),ro(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kr,formatHex:kr,formatHex8:Hv,formatRgb:Cr,toString:Cr}));function kr(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}`}function Hv(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}${xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cr(){const e=ro(this.opacity);return`${e===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${e===1?")":`, ${e})`}`}function ro(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xt(e){return e=Nt(e),(e<16?"0":"")+e.toString(16)}function Mr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ve(e,t,n,o)}function la(e){if(e instanceof Ve)return new Ve(e.h,e.s,e.l,e.opacity);if(e instanceof _n||(e=pn(e)),!e)return new Ve;if(e instanceof Ve)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),s=NaN,a=r-i,l=(r+i)/2;return a?(t===r?s=(n-o)/a+(n<o)*6:n===r?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?r+i:2-r-i,s*=60):a=l>0&&l<1?0:s,new Ve(s,a,l,e.opacity)}function Fv(e,t,n,o){return arguments.length===1?la(e):new Ve(e,t,n,o??1)}function Ve(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Mi(Ve,Fv,aa(_n,{brighter(e){return e=e==null?io:Math.pow(io,e),new Ve(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new Ve(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new De(Ro(e>=240?e-240:e+120,i,o),Ro(e,i,o),Ro(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Ve(Ir(this.h),Tn(this.s),Tn(this.l),ro(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ro(this.opacity);return`${e===1?"hsl(":"hsla("}${Ir(this.h)}, ${Tn(this.s)*100}%, ${Tn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ir(e){return e=(e||0)%360,e<0?e+360:e}function Tn(e){return Math.max(0,Math.min(1,e||0))}function Ro(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ua=e=>()=>e;function Lv(e,t){return function(n){return e+n*t}}function Yv(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Xv(e){return(e=+e)==1?ca:function(t,n){return n-t?Yv(t,n,e):ua(isNaN(t)?n:t)}}function ca(e,t){var n=t-e;return n?Lv(e,n):ua(isNaN(e)?t:e)}const Tr=function e(t){var n=Xv(t);function o(i,r){var s=n((i=si(i)).r,(r=si(r)).r),a=n(i.g,r.g),l=n(i.b,r.b),u=ca(i.opacity,r.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function ct(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ai=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vo=new RegExp(ai.source,"g");function Gv(e){return function(){return e}}function Wv(e){return function(t){return e(t)+""}}function Uv(e,t){var n=ai.lastIndex=Vo.lastIndex=0,o,i,r,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=ai.exec(e))&&(i=Vo.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),a[s]?a[s]+=r:a[++s]=r),(o=o[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:ct(o,i)})),n=Vo.lastIndex;return n<t.length&&(r=t.slice(n),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?Wv(l[0].x):Gv(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var Dr=180/Math.PI,li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function da(e,t,n,o,i,r){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Dr,skewX:Math.atan(l)*Dr,scaleX:s,scaleY:a}}var Dn;function Zv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?li:da(t.a,t.b,t.c,t.d,t.e,t.f)}function Kv(e){return e==null||(Dn||(Dn=document.createElementNS("http://www.w3.org/2000/svg","g")),Dn.setAttribute("transform",e),!(e=Dn.transform.baseVal.consolidate()))?li:(e=e.matrix,da(e.a,e.b,e.c,e.d,e.e,e.f))}function fa(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,h,p,E){if(u!==d||c!==h){var x=p.push("translate(",null,t,null,n);E.push({i:x-4,x:ct(u,d)},{i:x-2,x:ct(c,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function s(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,o)-2,x:ct(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,h){u!==c?h.push({i:d.push(i(d)+"skewX(",null,o)-2,x:ct(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,h,p,E){if(u!==d||c!==h){var x=p.push(i(p)+"scale(",null,",",null,")");E.push({i:x-4,x:ct(u,d)},{i:x-2,x:ct(c,h)})}else(d!==1||h!==1)&&p.push(i(p)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,h),s(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(p){for(var E=-1,x=h.length,$;++E<x;)d[($=h[E]).i]=$.x(p);return d.join("")}}}var qv=fa(Zv,"px, ","px)","deg)"),Jv=fa(Kv,", ",")",")"),Qv=1e-12;function Ar(e){return((e=Math.exp(e))+1/e)/2}function jv(e){return((e=Math.exp(e))-1/e)/2}function em(e){return((e=Math.exp(2*e))-1)/(e+1)}const tm=function e(t,n,o){function i(r,s){var a=r[0],l=r[1],u=r[2],c=s[0],d=s[1],h=s[2],p=c-a,E=d-l,x=p*p+E*E,$,b;if(x<Qv)b=Math.log(h/u)/t,$=function(R){return[a+R*p,l+R*E,u*Math.exp(t*R*b)]};else{var T=Math.sqrt(x),m=(h*h-u*u+o*x)/(2*u*n*T),M=(h*h-u*u-o*x)/(2*h*n*T),O=Math.log(Math.sqrt(m*m+1)-m),X=Math.log(Math.sqrt(M*M+1)-M);b=(X-O)/t,$=function(R){var V=R*b,ee=Ar(O),G=u/(n*T)*(ee*em(t*V+O)-jv(O));return[a+G*p,l+G*E,u*ee/Ar(t*V+O)]}}return $.duration=b*1e3*t/Math.SQRT2,$}return i.rho=function(r){var s=Math.max(.001,+r),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Xt=0,jt=0,Zt=0,ha=1e3,so,en,ao=0,Dt=0,Eo=0,gn=typeof performance=="object"&&performance.now?performance:Date,pa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ii(){return Dt||(pa(nm),Dt=gn.now()+Eo)}function nm(){Dt=0}function lo(){this._call=this._time=this._next=null}lo.prototype=ga.prototype={constructor:lo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ii():+n)+(t==null?0:+t),!this._next&&en!==this&&(en?en._next=this:so=this,en=this),this._call=e,this._time=n,ui()},stop:function(){this._call&&(this._call=null,this._time=1/0,ui())}};function ga(e,t,n){var o=new lo;return o.restart(e,t,n),o}function om(){Ii(),++Xt;for(var e=so,t;e;)(t=Dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xt}function zr(){Dt=(ao=gn.now())+Eo,Xt=jt=0;try{om()}finally{Xt=0,rm(),Dt=0}}function im(){var e=gn.now(),t=e-ao;t>ha&&(Eo-=t,ao=e)}function rm(){for(var e,t=so,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:so=n);en=e,ui(o)}function ui(e){if(!Xt){jt&&(jt=clearTimeout(jt));var t=e-Dt;t>24?(e<1/0&&(jt=setTimeout(zr,e-gn.now()-Eo)),Zt&&(Zt=clearInterval(Zt))):(Zt||(ao=gn.now(),Zt=setInterval(im,ha)),Xt=1,pa(zr))}}function Pr(e,t,n){var o=new lo;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var sm=Ni("start","end","cancel","interrupt"),am=[],va=0,Br=1,ci=2,Fn=3,Or=4,di=5,Ln=6;function So(e,t,n,o,i,r){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;lm(e,n,{name:t,index:o,group:i,on:sm,tween:am,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:va})}function Ti(e,t){var n=Fe(e,t);if(n.state>va)throw new Error("too late; already scheduled");return n}function qe(e,t){var n=Fe(e,t);if(n.state>Fn)throw new Error("too late; already running");return n}function Fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function lm(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=ga(r,0,n.time);function r(u){n.state=Br,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,h,p;if(n.state!==Br)return l();for(c in o)if(p=o[c],p.name===n.name){if(p.state===Fn)return Pr(s);p.state===Or?(p.state=Ln,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=Ln,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(Pr(function(){n.state===Fn&&(n.state=Or,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ci,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ci){for(n.state=Fn,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=di,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===di&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ln,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Yn(e,t){var n=e.__transition,o,i,r=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){r=!1;continue}i=o.state>ci&&o.state<di,o.state=Ln,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}r&&delete e.__transition}}function um(e){return this.each(function(){Yn(this,e)})}function cm(e,t){var n,o;return function(){var i=qe(this,e),r=i.tween;if(r!==n){o=n=r;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}i.tween=o}}function dm(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=qe(this,e),s=r.tween;if(s!==o){i=(o=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}r.tween=i}}function fm(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Fe(this.node(),n).tween,i=0,r=o.length,s;i<r;++i)if((s=o[i]).name===e)return s.value;return null}return this.each((t==null?cm:dm)(n,e,t))}function Di(e,t,n){var o=e._id;return e.each(function(){var i=qe(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Fe(i,o).value[t]}}function ma(e,t){var n;return(typeof t=="number"?ct:t instanceof pn?Tr:(n=pn(t))?(t=n,Tr):Uv)(e,t)}function hm(e){return function(){this.removeAttribute(e)}}function pm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gm(e,t,n){var o,i=n+"",r;return function(){var s=this.getAttribute(e);return s===i?null:s===o?r:r=t(o=s,n)}}function vm(e,t,n){var o,i=n+"",r;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?r:r=t(o=s,n)}}function mm(e,t,n){var o,i,r;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===i?r:(i=l,r=t(o=s,a)))}}function ym(e,t,n){var o,i,r;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===i?r:(i=l,r=t(o=s,a)))}}function wm(e,t){var n=xo(e),o=n==="transform"?Jv:ma;return this.attrTween(e,typeof t=="function"?(n.local?ym:mm)(n,o,Di(this,"attr."+e,t)):t==null?(n.local?pm:hm)(n):(n.local?vm:gm)(n,o,t))}function _m(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bm(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $m(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&bm(e,r)),n}return i._value=t,i}function xm(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&_m(e,r)),n}return i._value=t,i}function Em(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=xo(e);return this.tween(n,(o.local?$m:xm)(o,t))}function Sm(e,t){return function(){Ti(this,e).delay=+t.apply(this,arguments)}}function Nm(e,t){return t=+t,function(){Ti(this,e).delay=t}}function km(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sm:Nm)(t,e)):Fe(this.node(),t).delay}function Cm(e,t){return function(){qe(this,e).duration=+t.apply(this,arguments)}}function Mm(e,t){return t=+t,function(){qe(this,e).duration=t}}function Im(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cm:Mm)(t,e)):Fe(this.node(),t).duration}function Tm(e,t){if(typeof t!="function")throw new Error;return function(){qe(this,e).ease=t}}function Dm(e){var t=this._id;return arguments.length?this.each(Tm(t,e)):Fe(this.node(),t).ease}function Am(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;qe(this,e).ease=n}}function zm(e){if(typeof e!="function")throw new Error;return this.each(Am(this._id,e))}function Pm(e){typeof e!="function"&&(e=Js(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,a=o[i]=[],l,u=0;u<s;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&a.push(l);return new rt(o,this._parents,this._name,this._id)}function Bm(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),s=new Array(o),a=0;a<r;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(d[p]=h);for(;a<o;++a)s[a]=t[a];return new rt(s,this._parents,this._name,this._id)}function Om(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Rm(e,t,n){var o,i,r=Om(t)?Ti:qe;return function(){var s=r(this,e),a=s.on;a!==o&&(i=(o=a).copy()).on(t,n),s.on=i}}function Vm(e,t){var n=this._id;return arguments.length<2?Fe(this.node(),n).on.on(e):this.each(Rm(n,e,t))}function Hm(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Fm(){return this.on("end.remove",Hm(this._id))}function Lm(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ki(e));for(var o=this._groups,i=o.length,r=new Array(i),s=0;s<i;++s)for(var a=o[s],l=a.length,u=r[s]=new Array(l),c,d,h=0;h<l;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,So(u[h],t,n,h,u,Fe(c,n)));return new rt(r,this._parents,t,n)}function Ym(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qs(e));for(var o=this._groups,i=o.length,r=[],s=[],a=0;a<i;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=e.call(c,c.__data__,d,l),p,E=Fe(c,n),x=0,$=h.length;x<$;++x)(p=h[x])&&So(p,t,n,x,h,E);r.push(h),s.push(c)}return new rt(r,s,t,n)}var Xm=wn.prototype.constructor;function Gm(){return new Xm(this._groups,this._parents)}function Wm(e,t){var n,o,i;return function(){var r=Yt(this,e),s=(this.style.removeProperty(e),Yt(this,e));return r===s?null:r===n&&s===o?i:i=t(n=r,o=s)}}function ya(e){return function(){this.style.removeProperty(e)}}function Um(e,t,n){var o,i=n+"",r;return function(){var s=Yt(this,e);return s===i?null:s===o?r:r=t(o=s,n)}}function Zm(e,t,n){var o,i,r;return function(){var s=Yt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Yt(this,e))),s===l?null:s===o&&l===i?r:(i=l,r=t(o=s,a))}}function Km(e,t){var n,o,i,r="style."+t,s="end."+r,a;return function(){var l=qe(this,e),u=l.on,c=l.value[r]==null?a||(a=ya(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(s,i=c),l.on=o}}function qm(e,t,n){var o=(e+="")=="transform"?qv:ma;return t==null?this.styleTween(e,Wm(e,o)).on("end.style."+e,ya(e)):typeof t=="function"?this.styleTween(e,Zm(e,o,Di(this,"style."+e,t))).each(Km(this._id,e)):this.styleTween(e,Um(e,o,t),n).on("end.style."+e,null)}function Jm(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Qm(e,t,n){var o,i;function r(){var s=t.apply(this,arguments);return s!==i&&(o=(i=s)&&Jm(e,s,n)),o}return r._value=t,r}function jm(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Qm(e,t,n??""))}function e0(e){return function(){this.textContent=e}}function t0(e){return function(){var t=e(this);this.textContent=t??""}}function n0(e){return this.tween("text",typeof e=="function"?t0(Di(this,"text",e)):e0(e==null?"":e+""))}function o0(e){return function(t){this.textContent=e.call(this,t)}}function i0(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&o0(i)),t}return o._value=e,o}function r0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,i0(e))}function s0(){for(var e=this._name,t=this._id,n=wa(),o=this._groups,i=o.length,r=0;r<i;++r)for(var s=o[r],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=Fe(l,t);So(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new rt(o,this._parents,e,n)}function a0(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,s){var a={value:s},l={value:function(){--i===0&&r()}};n.each(function(){var u=qe(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&r()})}var l0=0;function rt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function wa(){return++l0}var Qe=wn.prototype;rt.prototype={constructor:rt,select:Lm,selectAll:Ym,selectChild:Qe.selectChild,selectChildren:Qe.selectChildren,filter:Pm,merge:Bm,selection:Gm,transition:s0,call:Qe.call,nodes:Qe.nodes,node:Qe.node,size:Qe.size,empty:Qe.empty,each:Qe.each,on:Vm,attr:wm,attrTween:Em,style:qm,styleTween:jm,text:n0,textTween:r0,remove:Fm,tween:fm,delay:km,duration:Im,ease:Dm,easeVarying:zm,end:a0,[Symbol.iterator]:Qe[Symbol.iterator]};function u0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var c0={time:null,delay:0,duration:250,ease:u0};function d0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function f0(e){var t,n;e instanceof rt?(t=e._id,e=e._name):(t=wa(),(n=c0).time=Ii(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var s=o[r],a=s.length,l,u=0;u<a;++u)(l=s[u])&&So(l,e,t,u,s,n||d0(l,t));return new rt(o,this._parents,e,t)}wn.prototype.interrupt=um;wn.prototype.transition=f0;const An=e=>()=>e;function h0(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function tt(e,t,n){this.k=e,this.x=t,this.y=n}tt.prototype={constructor:tt,scale:function(e){return e===1?this:new tt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ai=new tt(1,0,0);tt.prototype;function Ho(e){e.stopImmediatePropagation()}function Kt(e){e.preventDefault(),e.stopImmediatePropagation()}function p0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function g0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Rr(){return this.__zoom||Ai}function v0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function m0(){return navigator.maxTouchPoints||"ontouchstart"in this}function y0(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function w0(){var e=p0,t=g0,n=y0,o=v0,i=m0,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=tm,u=Ni("start","zoom","end"),c,d,h,p=500,E=150,x=0,$=10;function b(f){f.property("__zoom",Rr).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",ee).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(f,N,g,I){var S=f.selection?f.selection():f;S.property("__zoom",Rr),f!==S?O(f,N,g,I):S.interrupt().each(function(){X(this,arguments).event(I).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},b.scaleBy=function(f,N,g,I){b.scaleTo(f,function(){var S=this.__zoom.k,D=typeof N=="function"?N.apply(this,arguments):N;return S*D},g,I)},b.scaleTo=function(f,N,g,I){b.transform(f,function(){var S=t.apply(this,arguments),D=this.__zoom,C=g==null?M(S):typeof g=="function"?g.apply(this,arguments):g,P=D.invert(C),W=typeof N=="function"?N.apply(this,arguments):N;return n(m(T(D,W),C,P),S,s)},g,I)},b.translateBy=function(f,N,g,I){b.transform(f,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof g=="function"?g.apply(this,arguments):g),t.apply(this,arguments),s)},null,I)},b.translateTo=function(f,N,g,I,S){b.transform(f,function(){var D=t.apply(this,arguments),C=this.__zoom,P=I==null?M(D):typeof I=="function"?I.apply(this,arguments):I;return n(Ai.translate(P[0],P[1]).scale(C.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof g=="function"?-g.apply(this,arguments):-g),D,s)},I,S)};function T(f,N){return N=Math.max(r[0],Math.min(r[1],N)),N===f.k?f:new tt(N,f.x,f.y)}function m(f,N,g){var I=N[0]-g[0]*f.k,S=N[1]-g[1]*f.k;return I===f.x&&S===f.y?f:new tt(f.k,I,S)}function M(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function O(f,N,g,I){f.on("start.zoom",function(){X(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event(I).end()}).tween("zoom",function(){var S=this,D=arguments,C=X(S,D).event(I),P=t.apply(S,D),W=g==null?M(P):typeof g=="function"?g.apply(S,D):g,te=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),B=S.__zoom,Y=typeof N=="function"?N.apply(S,D):N,Z=l(B.invert(W).concat(te/B.k),Y.invert(W).concat(te/Y.k));return function(re){if(re===1)re=Y;else{var le=Z(re),se=te/le[2];re=new tt(se,W[0]-le[0]*se,W[1]-le[1]*se)}C.zoom(null,re)}})}function X(f,N,g){return!g&&f.__zooming||new R(f,N)}function R(f,N){this.that=f,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,N),this.taps=0}R.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,N){return this.mouse&&f!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var N=dt(this.that).datum();u.call(f,this.that,new h0(f,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),N)}};function V(f,...N){if(!e.apply(this,arguments))return;var g=X(this,N).event(f),I=this.__zoom,S=Math.max(r[0],Math.min(r[1],I.k*Math.pow(2,o.apply(this,arguments)))),D=lt(f);if(g.wheel)(g.mouse[0][0]!==D[0]||g.mouse[0][1]!==D[1])&&(g.mouse[1]=I.invert(g.mouse[0]=D)),clearTimeout(g.wheel);else{if(I.k===S)return;g.mouse=[D,I.invert(D)],Yn(this),g.start()}Kt(f),g.wheel=setTimeout(C,E),g.zoom("mouse",n(m(T(I,S),g.mouse[0],g.mouse[1]),g.extent,s));function C(){g.wheel=null,g.end()}}function ee(f,...N){if(h||!e.apply(this,arguments))return;var g=f.currentTarget,I=X(this,N,!0).event(f),S=dt(f.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",te,!0),D=lt(f,g),C=f.clientX,P=f.clientY;Cv(f.view),Ho(f),I.mouse=[D,this.__zoom.invert(D)],Yn(this),I.start();function W(B){if(Kt(B),!I.moved){var Y=B.clientX-C,Z=B.clientY-P;I.moved=Y*Y+Z*Z>x}I.event(B).zoom("mouse",n(m(I.that.__zoom,I.mouse[0]=lt(B,g),I.mouse[1]),I.extent,s))}function te(B){S.on("mousemove.zoom mouseup.zoom",null),Mv(B.view,I.moved),Kt(B),I.event(B).end()}}function G(f,...N){if(e.apply(this,arguments)){var g=this.__zoom,I=lt(f.changedTouches?f.changedTouches[0]:f,this),S=g.invert(I),D=g.k*(f.shiftKey?.5:2),C=n(m(T(g,D),I,S),t.apply(this,N),s);Kt(f),a>0?dt(this).transition().duration(a).call(O,C,I,f):dt(this).call(b.transform,C,I,f)}}function F(f,...N){if(e.apply(this,arguments)){var g=f.touches,I=g.length,S=X(this,N,f.changedTouches.length===I).event(f),D,C,P,W;for(Ho(f),C=0;C<I;++C)P=g[C],W=lt(P,this),W=[W,this.__zoom.invert(W),P.identifier],S.touch0?!S.touch1&&S.touch0[2]!==W[2]&&(S.touch1=W,S.taps=0):(S.touch0=W,D=!0,S.taps=1+!!c);c&&(c=clearTimeout(c)),D&&(S.taps<2&&(d=W[0],c=setTimeout(function(){c=null},p)),Yn(this),S.start())}}function k(f,...N){if(this.__zooming){var g=X(this,N).event(f),I=f.changedTouches,S=I.length,D,C,P,W;for(Kt(f),D=0;D<S;++D)C=I[D],P=lt(C,this),g.touch0&&g.touch0[2]===C.identifier?g.touch0[0]=P:g.touch1&&g.touch1[2]===C.identifier&&(g.touch1[0]=P);if(C=g.that.__zoom,g.touch1){var te=g.touch0[0],B=g.touch0[1],Y=g.touch1[0],Z=g.touch1[1],re=(re=Y[0]-te[0])*re+(re=Y[1]-te[1])*re,le=(le=Z[0]-B[0])*le+(le=Z[1]-B[1])*le;C=T(C,Math.sqrt(re/le)),P=[(te[0]+Y[0])/2,(te[1]+Y[1])/2],W=[(B[0]+Z[0])/2,(B[1]+Z[1])/2]}else if(g.touch0)P=g.touch0[0],W=g.touch0[1];else return;g.zoom("touch",n(m(C,P,W),g.extent,s))}}function K(f,...N){if(this.__zooming){var g=X(this,N).event(f),I=f.changedTouches,S=I.length,D,C;for(Ho(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),D=0;D<S;++D)C=I[D],g.touch0&&g.touch0[2]===C.identifier?delete g.touch0:g.touch1&&g.touch1[2]===C.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(C=lt(C,this),Math.hypot(d[0]-C[0],d[1]-C[1])<$)){var P=dt(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return b.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:An(+f),b):o},b.filter=function(f){return arguments.length?(e=typeof f=="function"?f:An(!!f),b):e},b.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:An(!!f),b):i},b.extent=function(f){return arguments.length?(t=typeof f=="function"?f:An([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),b):t},b.scaleExtent=function(f){return arguments.length?(r[0]=+f[0],r[1]=+f[1],b):[r[0],r[1]]},b.translateExtent=function(f){return arguments.length?(s[0][0]=+f[0][0],s[1][0]=+f[1][0],s[0][1]=+f[0][1],s[1][1]=+f[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(f){return arguments.length?(n=f,b):n},b.duration=function(f){return arguments.length?(a=+f,b):a},b.interpolate=function(f){return arguments.length?(l=f,b):l},b.on=function(){var f=u.on.apply(u,arguments);return f===u?b:f},b.clickDistance=function(f){return arguments.length?(x=(f=+f)*f,b):Math.sqrt(x)},b.tapDistance=function(f){return arguments.length?($=+f,b):$},b}const _a=Symbol("MiniMapSlots"),_0=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],b0={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},$0=pe({...b0,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=At(_a),i=hi(),r=_e(()=>i.style??{});function s(d){t("click",d)}function a(d){t("dblclick",d)}function l(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,h)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(H(),q(Ie,{key:0},[L(o)[`node-${n.type}`]?(H(),Ce(yt(L(o)[`node-${n.type}`]),za(Gn({key:0},{...n,...d.$attrs})),null,16)):(H(),q("rect",Gn({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||r.value.background||r.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:s,onDblclick:a,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,_0))],64)):ye("",!0)}}),x0=["width","height","viewBox","aria-labelledby"],E0=["id"],S0=["d","fill","stroke","stroke-width"],N0={name:"MiniMap",compatConfig:{MODE:3}},k0=pe({...N0,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=Hr(),o=hi(),i=200,r=150,{id:s,edges:a,viewport:l,translateExtent:u,dimensions:c,emits:d,d3Selection:h,d3Zoom:p,getNodesInitialized:E}=be(),x=ve();Ct(_a,n);const $=_e(()=>{var S;return e.width??((S=o.style)==null?void 0:S.width)??i}),b=_e(()=>{var S;return e.height??((S=o.style)==null?void 0:S.height)??r}),T=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",m=oe(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),M=oe(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),O=oe(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),X=oe(()=>$i(E.value.filter(S=>!S.hidden))),R=oe(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),V=oe(()=>E.value&&E.value.length?pf(X.value,R.value):R.value),ee=oe(()=>{const S=V.value.width/$.value,D=V.value.height/b.value;return Math.max(S,D)}),G=oe(()=>{const S=ee.value*$.value,D=ee.value*b.value,C=e.offsetScale*ee.value;return{offset:C,x:V.value.x-(S-V.value.width)/2-C,y:V.value.y-(D-V.value.height)/2-C,width:S+C*2,height:D+C*2}}),F=oe(()=>!G.value.x||!G.value.y?"":`
    M${G.value.x-G.value.offset},${G.value.y-G.value.offset}
    h${G.value.width+G.value.offset*2}
    v${G.value.height+G.value.offset*2}
    h${-G.value.width-G.value.offset*2}z
    M${R.value.x+e.maskBorderRadius},${R.value.y}
    h${R.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${R.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(R.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(R.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);Aa(S=>{if(x.value){const D=dt(x.value),C=te=>{if(te.sourceEvent.type!=="wheel"||!h.value||!p.value)return;const B=-te.sourceEvent.deltaY*(te.sourceEvent.deltaMode===1?.05:te.sourceEvent.deltaMode?1:.002)*e.zoomStep,Y=l.value.zoom*2**B;p.value.scaleTo(h.value,Y)},P=te=>{if(te.sourceEvent.type!=="mousemove"||!h.value||!p.value)return;const B=ee.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),Y={x:l.value.x-te.sourceEvent.movementX*B,y:l.value.y-te.sourceEvent.movementY*B},Z=[[0,0],[c.value.width,c.value.height]],re=Ai.translate(Y.x,Y.y).scale(l.value.zoom),le=p.value.constrain()(re,Z,u.value);p.value.transform(h.value,le)},W=w0().on("zoom",e.pannable?P:()=>{}).on("zoom.wheel",e.zoomable?C:()=>{});D.call(W),S(()=>{D.on("zoom",null)})}},{flush:"post"});function k(S){const[D,C]=lt(S);t("click",{event:S,position:{x:D,y:C}})}function K(S,D){const C={event:S,node:D,connectedEdges:_t([D],a.value)};d.miniMapNodeClick(C),t("nodeClick",C)}function f(S,D){const C={event:S,node:D,connectedEdges:_t([D],a.value)};d.miniMapNodeDoubleClick(C),t("nodeDblclick",C)}function N(S,D){const C={event:S,node:D,connectedEdges:_t([D],a.value)};d.miniMapNodeMouseEnter(C),t("nodeMouseenter",C)}function g(S,D){const C={event:S,node:D,connectedEdges:_t([D],a.value)};d.miniMapNodeMouseMove(C),t("nodeMousemove",C)}function I(S,D){const C={event:S,node:D,connectedEdges:_t([D],a.value)};d.miniMapNodeMouseLeave(C),t("nodeMouseleave",C)}return(S,D)=>(H(),Ce(L(Zs),{position:S.position,class:Ae(["vue-flow__minimap",{pannable:S.pannable,zoomable:S.zoomable}])},{default:Ge(()=>[(H(),q("svg",{ref_key:"el",ref:x,width:$.value,height:b.value,viewBox:[G.value.x,G.value.y,G.value.width,G.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${L(s)}`,onClick:k},[S.ariaLabel?(H(),q("title",{key:0,id:`vue-flow__minimap-${L(s)}`},Me(S.ariaLabel),9,E0)):ye("",!0),(H(!0),q(Ie,null,kt(L(E),C=>(H(),Ce($0,{id:C.id,key:C.id,position:C.computedPosition,dimensions:C.dimensions,selected:C.selected,dragging:C.dragging,style:ze(C.style),class:Ae(O.value(C)),color:m.value(C),"border-radius":S.nodeBorderRadius,"stroke-color":M.value(C),"stroke-width":S.nodeStrokeWidth,"shape-rendering":L(T),type:C.type,hidden:C.hidden,onClick:P=>K(P,C),onDblclick:P=>f(P,C),onMouseenter:P=>N(P,C),onMousemove:P=>g(P,C),onMouseleave:P=>I(P,C)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),A("path",{class:"vue-flow__minimap-mask",d:F.value,fill:S.maskColor,stroke:S.maskStrokeColor,"stroke-width":S.maskStrokeWidth,"fill-rule":"evenodd"},null,8,S0)],8,x0))]),_:1},8,["position","class"]))}});var nt=(e=>(e.Lines="lines",e.Dots="dots",e))(nt||{});const ba=function({dimensions:e,size:t,color:n}){return we("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},$a=function({radius:e,color:t}){return we("circle",{cx:e,cy:e,r:e,fill:t})};nt.Lines+"",nt.Dots+"";const C0={[nt.Dots]:"#81818a",[nt.Lines]:"#eee"},M0=["id","x","y","width","height","patternTransform"],I0={key:2,height:"100",width:"100"},T0=["fill"],D0=["x","y","fill"],A0={name:"Background",compatConfig:{MODE:3}},z0=pe({...A0,props:{id:{},variant:{default:()=>nt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=be(),o=oe(()=>{const s=n.value.zoom,[a,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[a*s||1,l*s||1],c=e.size*s,[d,h]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],p=[d*s||1+u[0]/2,h*s||1+u[1]/2];return{scaledGap:u,offset:p,size:c}}),i=_e(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),r=_e(()=>e.color||e.patternColor||C0[e.variant||nt.Dots]);return(s,a)=>(H(),q("svg",{class:"vue-flow__background vue-flow__container",style:ze({height:`${s.height>100?100:s.height}%`,width:`${s.width>100?100:s.width}%`})},[Ee(s.$slots,"pattern-container",{id:i.value},()=>[A("pattern",{id:i.value,x:L(n).x%o.value.scaledGap[0],y:L(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Ee(s.$slots,"pattern",{},()=>[s.variant===L(nt).Lines?(H(),Ce(L(ba),{key:0,size:s.lineWidth,color:r.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):s.variant===L(nt).Dots?(H(),Ce(L($a),{key:1,color:r.value,radius:o.value.size/2},null,8,["color","radius"])):ye("",!0),s.bgColor?(H(),q("svg",I0,[A("rect",{width:"100%",height:"100%",fill:s.bgColor},null,8,T0)])):ye("",!0)])],8,M0)]),A("rect",{x:s.x,y:s.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,D0),Ee(s.$slots,"default",{id:i.value})],4))}}),P0={class:"node-header"},B0={key:0,class:"node-icon"},O0={class:"node-title"},R0={key:0,class:"node-body"},V0={class:"node-description"},H0={key:1,class:"progress-bar"},F0=pe({__name:"CustomNode",props:{id:{},data:{},selected:{type:Boolean}},setup(e){const t=e,n=oe(()=>{switch(t.data.status){case"success":return"#52c41a";case"error":return"#ff4d4f";case"warning":return"#faad14";case"info":return"#1890ff";default:return"#d9d9d9"}}),o=oe(()=>`${t.data.progress||0}%`),i=()=>{console.log("Custom node clicked:",t.id)};return(r,s)=>(H(),q("div",{class:Ae(["custom-node",{selected:r.selected}]),onClick:i},[xe(L(pt),{type:"target",position:L(j).Top},null,8,["position"]),A("div",P0,[r.data.icon?(H(),q("div",B0,Me(r.data.icon),1)):ye("",!0),A("div",O0,Me(r.data.label),1),A("div",{class:"node-status",style:ze({backgroundColor:n.value})},null,4)]),r.data.description?(H(),q("div",R0,[A("p",V0,Me(r.data.description),1)])):ye("",!0),r.data.progress!==void 0?(H(),q("div",H0,[A("div",{class:"progress-fill",style:ze({width:o.value,backgroundColor:n.value})},null,4)])):ye("",!0),xe(L(pt),{type:"source",position:L(j).Bottom},null,8,["position"])],2))}}),L0=gt(F0,[["__scopeId","data-v-70668aff"]]),Y0={class:"form-header"},X0={class:"form-body"},G0=["value","onInput"],W0=["value","onInput"],U0=["value","onChange"],Z0=["value"],K0=["value","onInput"],q0=pe({__name:"FormNode",props:{id:{},data:{},selected:{type:Boolean}},emits:["updateData"],setup(e,{emit:t}){const n=e,o=t,i=ve({});me(()=>n.data.fields,s=>{s.forEach(a=>{i.value[a.name]===void 0&&(i.value[a.name]=a.value)})},{immediate:!0});const r=(s,a)=>{i.value[s]=a,o("updateData",n.id,{...n.data,formData:{...i.value}})};return(s,a)=>(H(),q("div",{class:Ae(["form-node",{selected:s.selected}])},[xe(L(pt),{type:"target",position:L(j).Top},null,8,["position"]),A("div",Y0,[A("h4",null,Me(s.data.label),1)]),A("div",X0,[(H(!0),q(Ie,null,kt(s.data.fields,l=>(H(),q("div",{key:l.name,class:"form-field"},[A("label",null,Me(l.name),1),l.type==="text"?(H(),q("input",{key:0,type:"text",value:i.value[l.name]||l.value,onInput:u=>r(l.name,u.target.value)},null,40,G0)):l.type==="number"?(H(),q("input",{key:1,type:"number",value:i.value[l.name]||l.value,onInput:u=>r(l.name,Number(u.target.value))},null,40,W0)):l.type==="select"?(H(),q("select",{key:2,value:i.value[l.name]||l.value,onChange:u=>r(l.name,u.target.value)},[(H(!0),q(Ie,null,kt(l.options,u=>(H(),q("option",{key:u,value:u},Me(u),9,Z0))),128))],40,U0)):l.type==="textarea"?(H(),q("textarea",{key:3,value:i.value[l.name]||l.value,onInput:u=>r(l.name,u.target.value),rows:"3"},null,40,K0)):ye("",!0)]))),128))]),xe(L(pt),{type:"source",position:L(j).Bottom},null,8,["position"])],2))}}),J0=gt(q0,[["__scopeId","data-v-85e2c544"]]),Q0={key:0,class:"drop-indicator"},j0=pe({__name:"FlowCanvas",props:{nodes:{},edges:{}},emits:["nodeSelect","edgeSelect","addEdge","updateNode","addNode"],setup(e,{emit:t}){const n=t,o={custom:L0,form:J0},i=ve(!1),{onPaneReady:r,onNodeDragStop:s,onConnect:a,setViewport:l,onNodeClick:u,onEdgeClick:c,onPaneClick:d,screenToFlowCoordinate:h}=be();a($=>{n("addEdge",$)}),s($=>{$.node&&n("updateNode",$.node.id,{position:$.node.position})}),u($=>{n("nodeSelect",$.node)}),c($=>{n("edgeSelect",$.edge)}),d(()=>{n("nodeSelect",null),n("edgeSelect",null)}),r($=>{console.log("Vue Flow 准备就绪:",$),setTimeout(()=>{l({x:50,y:20,zoom:1})},100)});const p=$=>{$.preventDefault(),$.dataTransfer.dropEffect="move",i.value=!0},E=()=>{i.value=!1},x=$=>{var T;$.preventDefault(),i.value=!1;const b=(T=$.dataTransfer)==null?void 0:T.getData("application/vueflow");if(b){const m=JSON.parse(b),M=h({x:$.clientX,y:$.clientY}),O={type:m.type,data:{label:m.name,description:`新建的${m.name}`,...m.data},style:m.style,position:M};n("addNode",O)}};return($,b)=>(H(),q("div",{class:Ae(["canvas-container",{"drag-over":i.value}]),onDragover:p,onDragleave:E,onDrop:x},[xe(L(hp),{nodes:$.nodes,edges:$.edges,"node-types":o,class:"vue-flow","min-zoom":.1,"max-zoom":4,"snap-to-grid":!0,"snap-grid":[20,20]},{default:Ge(()=>[xe(L(z0),{"pattern-color":"#e0e0e0",gap:20}),xe(L(Gp)),xe(L(k0),{"node-color":T=>T.type==="input"?"#667eea":T.type==="output"?"#51cf66":T.type==="decision"?"#4facfe":T.type==="custom"?"#f093fb":T.type==="form"?"#faad14":"#f5f5f5"},null,8,["node-color"])]),_:1},8,["nodes","edges"]),i.value?(H(),q("div",Q0,b[0]||(b[0]=[A("div",{class:"drop-text"},"释放以添加节点",-1)]))):ye("",!0)],34))}}),ey=gt(j0,[["__scopeId","data-v-12c3373a"]]),ty={class:"properties-panel"},ny={class:"panel-content"},oy={class:"tabs"},iy={key:0,class:"tab-content"},ry={key:0,class:"section"},sy={class:"section-content"},ay={class:"property-row"},ly=["value"],uy={class:"property-row"},cy=["value"],dy={class:"property-row"},fy=["value"],hy={class:"property-row"},py=["value"],gy={key:1,class:"section"},vy={class:"section-content"},my={class:"property-row"},yy=["value"],wy={class:"property-row"},_y=["value"],by={class:"property-row"},$y=["value"],xy={key:2,class:"section"},Ey={key:1,class:"tab-content"},Sy={class:"section"},Ny={class:"section-content"},ky={class:"property-row"},Cy=["value"],My=pe({__name:"FlowPropertiesPanel",props:{selectedNode:{},selectedEdge:{}},emits:["update"],setup(e,{emit:t}){const n=e,o=t,i=ve("node"),r=ve({id:"",label:"",type:"default",description:"",backgroundColor:"#ffffff",borderColor:"#000000",borderWidth:2});me(()=>n.selectedNode,u=>{var c,d,h,p,E;u&&(r.value={id:u.id||"",label:((c=u.data)==null?void 0:c.label)||"",type:u.type||"default",description:((d=u.data)==null?void 0:d.description)||"",backgroundColor:((h=u.style)==null?void 0:h.background)||"#ffffff",borderColor:s((p=u.style)==null?void 0:p.border)||"#000000",borderWidth:a((E=u.style)==null?void 0:E.border)||2})},{immediate:!0});const s=u=>{if(!u)return"#000000";const c=u.match(/#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3}/);return c?c[0]:"#000000"},a=u=>{if(!u)return 2;const c=u.match(/\d+/);return c?parseInt(c[0]):2},l=(u,c)=>{var h,p;r.value[u]=c;const d={data:{...(h=n.selectedNode)==null?void 0:h.data,label:r.value.label,description:r.value.description},style:{...(p=n.selectedNode)==null?void 0:p.style,background:r.value.backgroundColor,border:`${r.value.borderWidth}px solid ${r.value.borderColor}`}};u==="type"&&(d.type=c),o("update",d)};return(u,c)=>(H(),q("div",ty,[A("div",ny,[A("div",oy,[A("button",{class:Ae(["tab-button",{active:i.value==="node"}]),onClick:c[0]||(c[0]=d=>i.value="node")}," 节点属性 ",2),A("button",{class:Ae(["tab-button",{active:i.value==="flow"}]),onClick:c[1]||(c[1]=d=>i.value="flow")}," 流程配置 ",2)]),i.value==="node"?(H(),q("div",iy,[u.selectedNode?(H(),q("div",ry,[c[13]||(c[13]=A("div",{class:"section-header"},[A("span",null,"当前选中")],-1)),A("div",sy,[A("div",ay,[c[8]||(c[8]=A("label",{class:"property-label"},"节点ID",-1)),A("input",{type:"text",value:r.value.id,readonly:""},null,8,ly)]),A("div",uy,[c[9]||(c[9]=A("label",{class:"property-label"},"节点标签",-1)),A("input",{type:"text",value:r.value.label,onInput:c[2]||(c[2]=d=>l("label",d.target.value))},null,40,cy)]),A("div",dy,[c[11]||(c[11]=A("label",{class:"property-label"},"节点类型",-1)),A("select",{value:r.value.type,onChange:c[3]||(c[3]=d=>l("type",d.target.value))},c[10]||(c[10]=[A("option",{value:"input"},"开始节点",-1),A("option",{value:"default"},"处理节点",-1),A("option",{value:"decision"},"判断节点",-1),A("option",{value:"output"},"结束节点",-1)]),40,fy)]),A("div",hy,[c[12]||(c[12]=A("label",{class:"property-label"},"描述",-1)),A("textarea",{rows:"3",value:r.value.description,onInput:c[4]||(c[4]=d=>l("description",d.target.value)),placeholder:"节点描述信息..."},null,40,py)])])])):ye("",!0),u.selectedNode?(H(),q("div",gy,[c[17]||(c[17]=A("div",{class:"section-header"},[A("span",null,"样式设置")],-1)),A("div",vy,[A("div",my,[c[14]||(c[14]=A("label",{class:"property-label"},"背景颜色",-1)),A("input",{type:"color",value:r.value.backgroundColor,onInput:c[5]||(c[5]=d=>l("backgroundColor",d.target.value))},null,40,yy)]),A("div",wy,[c[15]||(c[15]=A("label",{class:"property-label"},"边框颜色",-1)),A("input",{type:"color",value:r.value.borderColor,onInput:c[6]||(c[6]=d=>l("borderColor",d.target.value))},null,40,_y)]),A("div",by,[c[16]||(c[16]=A("label",{class:"property-label"},"边框宽度",-1)),A("input",{type:"number",value:r.value.borderWidth,onInput:c[7]||(c[7]=d=>l("borderWidth",parseInt(d.target.value))),min:"1",max:"10"},null,40,$y)])])])):ye("",!0),u.selectedNode?ye("",!0):(H(),q("div",xy,c[18]||(c[18]=[A("div",{class:"section-content"},[A("p",{class:"no-selection"},"请选择一个节点或连线")],-1)])))])):ye("",!0),i.value==="flow"?(H(),q("div",Ey,[A("div",Sy,[c[21]||(c[21]=A("div",{class:"section-header"},[A("span",null,"流程设置")],-1)),A("div",Ny,[c[20]||(c[20]=Pa('<div class="property-row" data-v-254e63e5><label class="property-label" data-v-254e63e5>流程名称</label><input type="text" value="用户注册流程" data-v-254e63e5></div><div class="property-row" data-v-254e63e5><label class="property-label" data-v-254e63e5>流程版本</label><input type="text" value="1.0.0" data-v-254e63e5></div>',2)),A("div",ky,[c[19]||(c[19]=A("label",{class:"property-label"},"创建时间",-1)),A("input",{type:"text",value:new Date().toLocaleDateString(),readonly:""},null,8,Cy)])])])])):ye("",!0)])]))}}),Iy=gt(My,[["__scopeId","data-v-254e63e5"]]),Ty={class:"flow-container"},Dy={class:"flow-main"},Ay=pe({__name:"FlowView",setup(e){const t=ve([{id:"start",type:"input",position:{x:100,y:50},data:{label:"开始：用户注册流程",description:"用户访问注册页面"},style:{background:"#667eea",border:"none",borderRadius:"12px",color:"white",fontSize:"13px",fontWeight:"500",padding:"12px 16px",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.2)"}},{id:"userForm",type:"form",position:{x:100,y:180},data:{label:"用户信息表单",fields:[{name:"用户名",type:"text",value:""},{name:"邮箱",type:"text",value:""},{name:"用户类型",type:"select",value:"普通用户",options:["普通用户","VIP用户","企业用户"]},{name:"年龄",type:"number",value:18}]}},{id:"validation",type:"custom",position:{x:400,y:180},data:{label:"数据验证",description:"验证用户输入的信息格式和完整性",icon:"🔍",status:"info",progress:0}},{id:"decision",type:"decision",position:{x:400,y:350},data:{label:"验证通过？",description:"检查数据是否符合要求"},style:{background:"#4facfe",border:"none",borderRadius:"50%",color:"white",fontSize:"13px",fontWeight:"500",width:"100px",height:"100px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(79, 172, 254, 0.2)"}},{id:"database",type:"custom",position:{x:600,y:280},data:{label:"保存到数据库",description:"将用户信息存储到数据库中",icon:"💾",status:"success",progress:100}},{id:"emailConfig",type:"form",position:{x:600,y:450},data:{label:"邮件发送配置",fields:[{name:"邮件模板",type:"select",value:"欢迎邮件",options:["欢迎邮件","验证邮件","通知邮件"]},{name:"发送延迟(秒)",type:"number",value:0},{name:"邮件内容",type:"textarea",value:"欢迎加入我们的平台！"}]}},{id:"sendEmail",type:"custom",position:{x:800,y:350},data:{label:"发送欢迎邮件",description:"向用户发送注册成功的欢迎邮件",icon:"📧",status:"warning",progress:75}},{id:"error",type:"custom",position:{x:200,y:450},data:{label:"错误处理",description:"处理验证失败的情况",icon:"❌",status:"error",progress:0}},{id:"end",type:"output",position:{x:800,y:550},data:{label:"注册完成",description:"用户注册流程成功完成"},style:{background:"#51cf66",border:"none",borderRadius:"12px",color:"white",fontSize:"13px",fontWeight:"500",padding:"12px 16px",boxShadow:"0 2px 8px rgba(81, 207, 102, 0.2)"}}]),n=ve([{id:"e1",source:"start",target:"userForm",animated:!0,style:{stroke:"#667eea",strokeWidth:2},markerEnd:{type:"arrowclosed",color:"#667eea"}},{id:"e2",source:"userForm",target:"validation",style:{stroke:"#faad14",strokeWidth:2},markerEnd:{type:"arrowclosed",color:"#faad14"}},{id:"e3",source:"validation",target:"decision",style:{stroke:"#f093fb",strokeWidth:2},markerEnd:{type:"arrowclosed",color:"#f093fb"}},{id:"e4",source:"decision",target:"database",label:"验证通过",style:{stroke:"#51cf66",strokeWidth:2},labelStyle:{fill:"#51cf66",fontWeight:"500",fontSize:"12px"},markerEnd:{type:"arrowclosed",color:"#51cf66"}},{id:"e5",source:"database",target:"emailConfig",style:{stroke:"#f093fb",strokeWidth:2},markerEnd:{type:"arrowclosed",color:"#f093fb"}},{id:"e6",source:"emailConfig",target:"sendEmail",style:{stroke:"#faad14",strokeWidth:2},markerEnd:{type:"arrowclosed",color:"#faad14"}},{id:"e7",source:"sendEmail",target:"end",style:{stroke:"#51cf66",strokeWidth:2},markerEnd:{type:"arrowclosed",color:"#51cf66"}},{id:"e8",source:"decision",target:"error",label:"验证失败",type:"smoothstep",style:{stroke:"#ff6b6b",strokeWidth:2,strokeDasharray:"6,3"},labelStyle:{fill:"#ff6b6b",fontWeight:"500",fontSize:"12px"},markerEnd:{type:"arrowclosed",color:"#ff6b6b"}},{id:"e9",source:"error",target:"userForm",label:"重新填写",type:"smoothstep",style:{stroke:"#ff6b6b",strokeWidth:2,strokeDasharray:"3,3"},labelStyle:{fill:"#ff6b6b",fontWeight:"500",fontSize:"12px"},markerEnd:{type:"arrowclosed",color:"#ff6b6b"}}]),o=ve(null),i=ve(null),r=(h,p)=>{const E=t.value.findIndex(x=>x.id===h);E!==-1&&(t.value[E]={...t.value[E],...p})},s=h=>{const p={...h,id:`node_${Date.now()}`,position:h.position||{x:200,y:200}};t.value.push(p)},a=h=>{const p={...h,id:`edge_${Date.now()}`,style:{stroke:"#667eea",strokeWidth:2},markerEnd:{type:"arrowclosed",color:"#667eea"}};n.value.push(p)},l=h=>{switch(h){case"save":console.log("保存流程图",{nodes:t.value,edges:n.value});break;case"export":console.log("导出流程图");break;case"import":console.log("导入流程图");break;case"clear":t.value=[],n.value=[],o.value=null,i.value=null;break;case"undo":console.log("撤销");break;case"redo":console.log("重做");break;case"autoLayout":console.log("自动布局");break;case"fitView":console.log("适应画布");break}},u=h=>{o.value=h,i.value=null},c=h=>{i.value=h,o.value=null},d=h=>{o.value&&(r(o.value.id,h),o.value={...o.value,...h})};return(h,p)=>(H(),q("div",Ty,[xe(ll,{nodes:t.value,edges:n.value,onAddNode:s},null,8,["nodes","edges"]),A("div",Dy,[xe(Fa,{onAction:l}),xe(ey,{nodes:t.value,edges:n.value,onNodeSelect:u,onEdgeSelect:c,onAddEdge:a,onUpdateNode:r,onAddNode:s},null,8,["nodes","edges"])]),xe(Iy,{"selected-node":o.value,"selected-edge":i.value,onUpdate:d},null,8,["selected-node","selected-edge"])]))}}),Py=gt(Ay,[["__scopeId","data-v-4e600055"]]);export{Py as default};
